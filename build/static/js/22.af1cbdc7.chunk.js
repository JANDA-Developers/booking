(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1332:function(e,t,a){"use strict";var n=a(16),c=a(0),i=a.n(c),l=a(1423),o=a(1),s=a(4),r=a(146);t.a=function(e){var t=e.JDtype,a=e.data,c=e.originalData,u=Object(n.a)(e,["JDtype","data","originalData"]),d={labels:[Object(o.b)("none_data")],datasets:[{data:[1],backgroundColor:"#CFCFCF",hoverBackgroundColor:"#b8b8b8"}]},b=Object(s.m)(c)?d:a,m=[{Header:Object(o.b)("division"),accessor:"data",Cell:function(e){e.value,e.original;var t=e.index;return i.a.createElement("div",null,b.labels[t])}},{Header:Object(o.b)("sales"),accessor:"data",Cell:function(e){e.value;var t=e.original;return i.a.createElement("div",null,t)}}];switch(t){case"doughnut":return i.a.createElement(l.a,Object.assign({data:b},u));case"line":return i.a.createElement(l.b,Object.assign({data:b},u));case"list":return i.a.createElement(r.b,Object.assign({},r.a,{data:b.datasets&&b.datasets[0].data||[],columns:m}));default:return i.a.createElement("div",null)}}},1368:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(79),c=a(3),i=a(1421),l=a.n(i),o=a(333),s=a.n(o),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0,a=s()({count:e-c.R.length});return a=[].concat(Object(n.a)(c.R),"string"===typeof a?[a]:Object(n.a)(a)),t&&t.light&&(a=a.map(function(e){return l()(e).lighten(.15).toString()})),a}},2714:function(e,t,a){},2757:function(e,t,a){"use strict";a.r(t);var n,c=a(11),i=a(18),l=a(20),o=a(19),s=a(21),r=a(0),u=a.n(r),d=a(26),b=a(193),m=a(3),E=a(1),f=a(13),O=a(27),_=a.n(O),h=a(15),v=(a(2714),a(45)),g=a(194),p=function(e){e.context;var t=e.staticsProps,a=t.queryDateHook,n=t.queryOp,c=t.setQueryOp;return u.a.createElement("div",null,u.a.createElement("h6",null,Object(E.b)("statistical_transformation")),u.a.createElement("div",null,u.a.createElement(v.b,{selectedOption:{value:Object(E.b)("sales_statistics"),label:Object(E.b)("sales_statistics")},onChange:function(e){c(Object(d.a)({},n,{selectStatic:e.value}))},options:m.S,label:Object(E.b)("witch_statistics_do_you_want")})),u.a.createElement("div",null,u.a.createElement(g.a,Object.assign({canSelectBeforeDay:!0},a,{label:Object(E.b)("date_of_statistics"),input:!0}))),u.a.createElement("div",null,u.a.createElement(v.b,{onChange:function(e){c(Object(d.a)({},n,{unit:e.value}))},selectedOption:{value:n.unit,label:Object(E.b)(n.unit)},options:m.T,label:Object(E.b)("which_unit_would_you_like_to_see")})))},j=a(147),w=a.n(j),D=a(14),y=function(e){e.context;var t=e.setViewMode,a=e.viewMode,c=e.iconSize,i=void 0===c?D.a.DEFAULT:c;return u.a.createElement("div",{className:"statistic__iconsWrap"},u.a.createElement(D.b,{onClick:function(){t(n.list)},selected:"list"===a,hover:!0,icon:"checkList",size:i}),u.a.createElement(D.b,{onClick:function(){t(n.line)},selected:a===n.line,hover:!0,icon:"graphLine",size:i}),u.a.createElement(D.b,{onClick:function(){t(n.doughnut)},selected:a===n.doughnut,hover:!0,icon:"graphPie",size:i}))},k=a(29),C=function(e){var t=e.staticsProps,a=e.context,n=e.modalHook,c=t.viewMode,i=t.setViewMode;return u.a.createElement(k.b,Object.assign({visibleOverflow:!0,minWidth:m.u},n),u.a.createElement("div",null,u.a.createElement("div",{className:"modal__section"},u.a.createElement(p,{staticsProps:t,context:a})),u.a.createElement("h6",null,Object(E.b)("graph_shape")),u.a.createElement("div",null,u.a.createElement(y,{iconSize:D.a.MEDIUM_LARGE,context:a,viewMode:c,setViewMode:i}))))},S=a(1368),T=a(1332);!function(e){e.list="list",e.line="line",e.doughnut="doughnut"}(n||(n={}));var Y=w()(function(e){var t=e.context,a=e.loading,i=e.staticsWrapProps,l=e.windowWidth,o=i.setQueryOp,s=i.queryOp,O=i.staticData,v=i.queryDateHook,g=Object(r.useState)(n.doughnut),j=Object(c.a)(g,2),w=j[0],D=j[1],k=l<=m.cb.TABLET,Y=Object(E.m)(!1),x=w===n.list?{borderColor:"rgba(75,192,192,1)"}:{},A={labels:a?new Array(O.length).fill("loading"):s.unit===m.U.BY_DAY_OF_WEEK?O.map(function(e){return"".concat(e.dateInfo.dayOfWeek)}):s.unit===m.U.BY_DATE?O.map(function(e){return"".concat(e.dateInfo.year,"-").concat(e.dateInfo.month,"-").concat(e.dateInfo.date)}):s.unit===m.U.MONTHLY?O.map(function(e){return"".concat(e.dateInfo.year,"-").concat(e.dateInfo.month)}):s.unit===m.U.WEEKLY?O.map(function(e){return"".concat(e.dateInfo.year,"-").concat(e.dateInfo.month)}):s.unit===m.U.YEARLY?O.map(function(e){return"".concat(e.dateInfo.year)}):[""],datasets:[{label:s.selectStatic,data:O.map(function(e){return e.price}),fill:!1,backgroundColor:Object(S.a)(O.length),hoverBackgroundColor:Object(S.a)(O.length,{light:!0})}]};Object.assign(A,x);var M=Object(d.a)({},i,{viewMode:w,setViewMode:D});return u.a.createElement("div",{className:"container statistic"},u.a.createElement("div",{className:"docs-section"},u.a.createElement("h3",null,Object(E.b)("statistics")),u.a.createElement("div",{className:"statistic__shortBtnsWrap"},u.a.createElement(f.a,{onClick:function(){o({selectStatic:Object(E.b)("sales_statistics"),unit:m.U.BY_DAY_OF_WEEK}),v.setFrom(_()(new Date).add(-1,"day").toDate()),v.setTo(new Date)},label:Object(E.b)("today_sales")}),u.a.createElement(f.a,{onClick:function(){o({selectStatic:Object(E.b)("sales_statistics"),unit:m.U.BY_DAY_OF_WEEK}),v.setFrom(_()(new Date).startOf("month").toDate()),v.setTo(new Date)},label:Object(E.b)("this_month_sales")}),u.a.createElement(f.a,{onClick:function(){o({selectStatic:Object(E.b)("sales_statistics"),unit:m.U.BY_DATE}),v.setFrom(_()(new Date).add(-14,"day").toDate()),v.setTo(new Date)},label:Object(E.b)("day_sales")}),u.a.createElement(f.a,{onClick:function(){o({unit:m.U.MONTHLY,selectStatic:""}),v.setFrom(_()(new Date).add(-12,"month").toDate()),v.setTo(new Date)},label:Object(E.b)("month_sales")}),u.a.createElement(f.a,{onClick:function(){o({unit:m.U.YEARLY,selectStatic:""}),v.setFrom(_()(new Date).add(-3,"year").toDate()),v.setTo(new Date)},label:Object(E.b)("year_sales")})),u.a.createElement("div",{className:"flex-grid"},u.a.createElement("div",{className:"flex-grid__col col--full-6 col--wmd-12"},u.a.createElement(b.a,{className:"statistic__graphCard",fullHeight:!k},a?u.a.createElement("div",{className:"statistic__graphPreloader"},u.a.createElement(h.a,{wrapClassName:"",position:"center",noAnimation:!0,size:"large",loading:a})):u.a.createElement(r.Fragment,null,!k&&u.a.createElement(y,{context:t,viewMode:w,setViewMode:D}),u.a.createElement("div",{className:("list"===w?"statistic__table":void 0)+" statistic__graphWrap"},u.a.createElement(T.a,{originalData:O,JDtype:w,data:A}))))),l>m.cb.TABLET?u.a.createElement("div",{className:"flex-grid__col col--full-6 col--wmd-12"},u.a.createElement(b.a,{fullHeight:!k},u.a.createElement(p,{staticsProps:M,context:t}))):u.a.createElement(C,{context:t,staticsProps:M,modalHook:Y})),l>m.cb.TABLET||u.a.createElement(f.a,{mode:"flat",onClick:function(){Y.openModal()},thema:"primary",label:Object(E.b)("change_statistics"),icon:"controller"})),u.a.createElement(h.a,{floating:!0,size:m.f,loading:a}))}),x=a(17),A=a(12),M=a(4),F=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),t}(x.c);t.default=function(e){var t=e.context,a=t.house,n=Object(r.useState)({selectStatic:Object(E.b)("sales_statistics"),unit:m.U.BY_DAY_OF_WEEK}),i=Object(c.a)(n,2),l=i[0],o=i[1],s=Object(E.f)(_()(new Date).add(-1,"day").toDate(),new Date);return u.a.createElement("div",null,u.a.createElement(F,{skip:!s.to||!s.from,variables:{unit:l.unit,checkOut:s.to,checkIn:s.from,houseId:a._id},query:A.ab},function(e){var a=e.data,n=e.loading,c=(e.error,e.networkStatus,Object(M.q)(a,"GetSalesStatistic","data",[])),i={queryOp:l,setQueryOp:o,staticData:c||[],queryDateHook:s};return u.a.createElement(Y,{staticsWrapProps:i,context:t,loading:n})}))}}}]);