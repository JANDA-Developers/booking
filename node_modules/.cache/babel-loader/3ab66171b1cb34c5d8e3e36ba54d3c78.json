{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\src\\\\pages\\\\middleServer\\\\HMconfig\\\\HMconfigWrap.tsx\";\nimport React from \"react\";\nimport { Query } from \"react-apollo\";\nimport HMconfig from \"./HMconfig\";\nimport { GET_HOUSE_MENUAL, UPDATE_HM } from \"../../../queries\";\nimport { queryDataFormater, s4, onCompletedMessage } from \"../../../utils/utils\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { getOperationName } from \"apollo-link\";\nimport client from \"../../../apolloClient\";\nimport { LANG } from \"../../../hooks/hook\";\n\nvar GetHouseMenuaQu =\n/*#__PURE__*/\nfunction (_Query) {\n  _inherits(GetHouseMenuaQu, _Query);\n\n  function GetHouseMenuaQu() {\n    _classCallCheck(this, GetHouseMenuaQu);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(GetHouseMenuaQu).apply(this, arguments));\n  }\n\n  return GetHouseMenuaQu;\n}(Query);\n\nvar HMwrap = function HMwrap(_ref) {\n  var context = _ref.context;\n  var house = context.house;\n\n  var _useMutation = useMutation(UPDATE_HM, {\n    onCompleted: function onCompleted(_ref2) {\n      var UpdateHM = _ref2.UpdateHM;\n      onCompletedMessage(UpdateHM, LANG(\"HM_update\"), LANG(\"HM_update_fail\"));\n    },\n    refetchQueries: [getOperationName(GET_HOUSE_MENUAL)],\n    client: client\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      updateHMmu = _useMutation2[0],\n      updateHMloading = _useMutation2[1].loading;\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(GetHouseMenuaQu, {\n    query: GET_HOUSE_MENUAL,\n    variables: {\n      houseId: house._id\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, function (_ref3) {\n    var HMData = _ref3.data,\n        loading = _ref3.loading;\n    var HM = queryDataFormater(HMData, \"GetHM\", \"HM\", undefined);\n    return React.createElement(HMconfig, {\n      HM: HM || undefined,\n      updateHMmu: updateHMmu,\n      loading: loading,\n      mutationLoading: updateHMloading,\n      context: context,\n      key: s4(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    });\n  }));\n};\n\nexport default HMwrap;","map":{"version":3,"sources":["C:/Users/김민재/Desktop/projects/jd-api-server-client/src/pages/middleServer/HMconfig/HMconfigWrap.tsx"],"names":["React","Query","HMconfig","GET_HOUSE_MENUAL","UPDATE_HM","queryDataFormater","s4","onCompletedMessage","useMutation","getOperationName","client","LANG","GetHouseMenuaQu","HMwrap","context","house","onCompleted","UpdateHM","refetchQueries","updateHMmu","updateHMloading","loading","houseId","_id","HMData","data","HM","undefined"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,QAAoB,cAApB;AAQA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAAQC,gBAAR,EAA0BC,SAA1B,QAA0C,kBAA1C;AACA,SAAQC,iBAAR,EAA2BC,EAA3B,EAA+BC,kBAA/B,QAAwD,sBAAxD;AAEA,SAAQC,WAAR,QAA0B,qBAA1B;AACA,SAAQC,gBAAR,QAA+B,aAA/B;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,SAAQC,IAAR,QAAmB,qBAAnB;;IAYMC,e;;;;;;;;;;;;EAAwBX,K;;AAE9B,IAAMY,MAAwB,GAAG,SAA3BA,MAA2B,OAAe;AAAA,MAAbC,OAAa,QAAbA,OAAa;AAAA,MACvCC,KADuC,GAC9BD,OAD8B,CACvCC,KADuC;;AAAA,qBAEGP,WAAW,CAG1DJ,SAH0D,EAG/C;AACXY,IAAAA,WAAW,EAAE,4BAAgB;AAAA,UAAdC,QAAc,SAAdA,QAAc;AAC3BV,MAAAA,kBAAkB,CAACU,QAAD,EAAWN,IAAI,CAAC,WAAD,CAAf,EAA8BA,IAAI,CAAC,gBAAD,CAAlC,CAAlB;AACD,KAHU;AAIXO,IAAAA,cAAc,EAAE,CAACT,gBAAgB,CAACN,gBAAD,CAAjB,CAJL;AAKXO,IAAAA,MAAM,EAAEA;AALG,GAH+C,CAFd;AAAA;AAAA,MAEvCS,UAFuC;AAAA,MAEjBC,eAFiB,oBAE1BC,OAF0B;;AAa9C,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,eAAD;AACE,IAAA,KAAK,EAAElB,gBADT;AAEE,IAAA,SAAS,EAAE;AACTmB,MAAAA,OAAO,EAAEP,KAAK,CAACQ;AADN,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMG,iBAA6B;AAAA,QAArBC,MAAqB,SAA3BC,IAA2B;AAAA,QAAbJ,OAAa,SAAbA,OAAa;AAC5B,QAAMK,EAAE,GAAGrB,iBAAiB,CAACmB,MAAD,EAAS,OAAT,EAAkB,IAAlB,EAAwBG,SAAxB,CAA5B;AAEA,WACE,oBAAC,QAAD;AACE,MAAA,EAAE,EAAED,EAAE,IAAIC,SADZ;AAEE,MAAA,UAAU,EAAER,UAFd;AAGE,MAAA,OAAO,EAAEE,OAHX;AAIE,MAAA,eAAe,EAAED,eAJnB;AAKE,MAAA,OAAO,EAAEN,OALX;AAME,MAAA,GAAG,EAAER,EAAE,EANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAUD,GAnBH,CADF,CADF;AAyBD,CAtCD;;AAwCA,eAAeO,MAAf","sourcesContent":["import React from \"react\";\r\nimport {Query} from \"react-apollo\";\r\nimport {\r\n  getHM,\r\n  getHMVariables,\r\n  updateHM,\r\n  updateHMVariables\r\n} from \"../../../types/api\";\r\nimport {SalesStatisticsUnit} from \"../../../types/enum\";\r\nimport HMconfig from \"./HMconfig\";\r\nimport {GET_HOUSE_MENUAL, UPDATE_HM} from \"../../../queries\";\r\nimport {queryDataFormater, s4, onCompletedMessage} from \"../../../utils/utils\";\r\nimport {IContext} from \"../../MiddleServerRouter\";\r\nimport {useMutation} from \"@apollo/react-hooks\";\r\nimport {getOperationName} from \"apollo-link\";\r\nimport client from \"../../../apolloClient\";\r\nimport {LANG} from \"../../../hooks/hook\";\r\n\r\ninterface IProps {\r\n  context: IContext;\r\n}\r\n// refetch 가 Query 컴포넌트 리턴 프로프임\r\n\r\nexport interface IQueryOp {\r\n  selectStatic: string;\r\n  unit: SalesStatisticsUnit;\r\n}\r\n\r\nclass GetHouseMenuaQu extends Query<getHM, getHMVariables> {}\r\n\r\nconst HMwrap: React.FC<IProps> = ({context}) => {\r\n  const {house} = context;\r\n  const [updateHMmu, {loading: updateHMloading}] = useMutation<\r\n    updateHM,\r\n    updateHMVariables\r\n  >(UPDATE_HM, {\r\n    onCompleted: ({UpdateHM}) => {\r\n      onCompletedMessage(UpdateHM, LANG(\"HM_update\"), LANG(\"HM_update_fail\"));\r\n    },\r\n    refetchQueries: [getOperationName(GET_HOUSE_MENUAL)!],\r\n    client: client as any\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <GetHouseMenuaQu\r\n        query={GET_HOUSE_MENUAL}\r\n        variables={{\r\n          houseId: house._id\r\n        }}\r\n      >\r\n        {({data: HMData, loading}) => {\r\n          const HM = queryDataFormater(HMData, \"GetHM\", \"HM\", undefined);\r\n\r\n          return (\r\n            <HMconfig\r\n              HM={HM || undefined}\r\n              updateHMmu={updateHMmu}\r\n              loading={loading}\r\n              mutationLoading={updateHMloading}\r\n              context={context}\r\n              key={s4()}\r\n            />\r\n          );\r\n        }}\r\n      </GetHouseMenuaQu>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HMwrap;\r\n"]},"metadata":{},"sourceType":"module"}