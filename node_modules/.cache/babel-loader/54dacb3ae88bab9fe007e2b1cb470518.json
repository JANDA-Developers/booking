{"ast":null,"code":"import _objectWithoutProperties from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\src\\\\components\\\\Memo\\\\component\\\\MemoIcon.tsx\";\nimport React, { Fragment, useEffect } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { GET_MEMO } from \"../../../queries\";\nimport { queryDataFormater, s4 } from \"../../../utils/utils\";\nimport JDIcon from \"../../../atoms/icons/Icons\";\nimport { MemoType } from \"../../../types/enum\";\nimport client from \"../../../apolloClient\";\nimport JDbadge from \"../../../atoms/badge/Badge\";\nimport MemoAlertModal from \"./MemoAlertModal\";\nimport { useModal, LANG } from \"../../../hooks/hook\";\nimport { alertMemo } from \"../../../pages/bookingHost/helper\";\n\nvar MemoIcon = function MemoIcon(_ref) {\n  var context = _ref.context,\n      props = _objectWithoutProperties(_ref, [\"context\"]);\n\n  var house = context.house;\n  var memoAlertModalHook = useModal(false);\n\n  var _useQuery = useQuery(GET_MEMO, {\n    client: client,\n    variables: {\n      houseId: house._id,\n      memoType: MemoType.HOST\n    }\n  }),\n      data = _useQuery.data,\n      loading = _useQuery.loading;\n\n  var memos = queryDataFormater(data, \"GetMemos\", \"memos\", []) || [];\n  var haveEnableAlert = memos.find(function (memo) {\n    return memo.enableAlert;\n  });\n  useEffect(function () {\n    alertMemo(memoAlertModalHook, memos);\n  }, [loading]);\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(MemoAlertModal, {\n    context: context,\n    modalHook: memoAlertModalHook,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), React.createElement(JDIcon, Object.assign({\n    icon: \"memo\"\n  }, props, {\n    dots: haveEnableAlert ? [React.createElement(JDbadge, {\n      key: s4(),\n      tooltip: LANG(\"there_is_an_alarm_set_note\"),\n      thema: \"point\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    })] : undefined,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  })));\n};\n\nexport default MemoIcon;","map":{"version":3,"sources":["C:/Users/김민재/Desktop/projects/jd-api-server-client/src/components/Memo/component/MemoIcon.tsx"],"names":["React","Fragment","useEffect","useQuery","GET_MEMO","queryDataFormater","s4","JDIcon","MemoType","client","JDbadge","MemoAlertModal","useModal","LANG","alertMemo","MemoIcon","context","props","house","memoAlertModalHook","variables","houseId","_id","memoType","HOST","data","loading","memos","haveEnableAlert","find","memo","enableAlert","undefined"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAEA,SAASC,iBAAT,EAA4BC,EAA5B,QAAsC,sBAAtC;AACA,OAAOC,MAAP,MAAwC,4BAAxC;AAEA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,OAAOC,OAAP,MAAoB,4BAApB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAASC,QAAT,EAAmBC,IAAnB,QAA+B,qBAA/B;AACA,SAASC,SAAT,QAA0B,mCAA1B;;AAOA,IAAMC,QAA0B,GAAG,SAA7BA,QAA6B,OAA2B;AAAA,MAAxBC,OAAwB,QAAxBA,OAAwB;AAAA,MAAZC,KAAY;;AAAA,MACpDC,KADoD,GAC1CF,OAD0C,CACpDE,KADoD;AAE5D,MAAMC,kBAAkB,GAAGP,QAAQ,CAAC,KAAD,CAAnC;;AAF4D,kBAGlCT,QAAQ,CAA8BC,QAA9B,EAAwC;AACxEK,IAAAA,MAAM,EAANA,MADwE;AAExEW,IAAAA,SAAS,EAAE;AACTC,MAAAA,OAAO,EAAEH,KAAK,CAACI,GADN;AAETC,MAAAA,QAAQ,EAAEf,QAAQ,CAACgB;AAFV;AAF6D,GAAxC,CAH0B;AAAA,MAGpDC,IAHoD,aAGpDA,IAHoD;AAAA,MAG9CC,OAH8C,aAG9CA,OAH8C;;AAW5D,MAAMC,KAAK,GAAGtB,iBAAiB,CAACoB,IAAD,EAAO,UAAP,EAAmB,OAAnB,EAA4B,EAA5B,CAAjB,IAAoD,EAAlE;AAEA,MAAMG,eAAe,GAAGD,KAAK,CAACE,IAAN,CAAW,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACC,WAAT;AAAA,GAAf,CAAxB;AAEA7B,EAAAA,SAAS,CAAC,YAAM;AACdY,IAAAA,SAAS,CAACK,kBAAD,EAAqBQ,KAArB,CAAT;AACD,GAFQ,EAEN,CAACD,OAAD,CAFM,CAAT;AAIA,SACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,cAAD;AAAgB,IAAA,OAAO,EAAEV,OAAzB;AAAkC,IAAA,SAAS,EAAEG,kBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC;AADP,KAEMF,KAFN;AAGE,IAAA,IAAI,EACFW,eAAe,GACX,CACE,oBAAC,OAAD;AACE,MAAA,GAAG,EAAEtB,EAAE,EADT;AAEE,MAAA,OAAO,EAAEO,IAAI,CAAC,4BAAD,CAFf;AAGE,MAAA,KAAK,EAAC,OAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADW,GAQXmB,SAZR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAFF,CADF;AAoBD,CAvCD;;AAyCA,eAAejB,QAAf","sourcesContent":["import React, { Fragment, useEffect } from \"react\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport { GET_MEMO } from \"../../../queries\";\r\nimport { getMemos, getMemosVariables } from \"../../../types/api\";\r\nimport { queryDataFormater, s4 } from \"../../../utils/utils\";\r\nimport JDIcon, { IconConifgProps } from \"../../../atoms/icons/Icons\";\r\nimport { IContext } from \"../../../pages/bookingHost/BookingHostRouter\";\r\nimport { MemoType } from \"../../../types/enum\";\r\nimport client from \"../../../apolloClient\";\r\nimport JDbadge from \"../../../atoms/badge/Badge\";\r\nimport MemoAlertModal from \"./MemoAlertModal\";\r\nimport { useModal, LANG } from \"../../../hooks/hook\";\r\nimport { alertMemo } from \"../../../pages/bookingHost/helper\";\r\n\r\ninterface Iprops extends IconConifgProps {\r\n  context: IContext;\r\n  onClick: any;\r\n}\r\n\r\nconst MemoIcon: React.FC<Iprops> = ({ context, ...props }) => {\r\n  const { house } = context;\r\n  const memoAlertModalHook = useModal(false);\r\n  const { data, loading } = useQuery<getMemos, getMemosVariables>(GET_MEMO, {\r\n    client,\r\n    variables: {\r\n      houseId: house._id,\r\n      memoType: MemoType.HOST\r\n    }\r\n  });\r\n\r\n  const memos = queryDataFormater(data, \"GetMemos\", \"memos\", []) || [];\r\n\r\n  const haveEnableAlert = memos.find(memo => memo.enableAlert);\r\n\r\n  useEffect(() => {\r\n    alertMemo(memoAlertModalHook, memos);\r\n  }, [loading]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <MemoAlertModal context={context} modalHook={memoAlertModalHook} />\r\n      <JDIcon\r\n        icon=\"memo\"\r\n        {...props}\r\n        dots={\r\n          haveEnableAlert\r\n            ? [\r\n                <JDbadge\r\n                  key={s4()}\r\n                  tooltip={LANG(\"there_is_an_alarm_set_note\")}\r\n                  thema=\"point\"\r\n                />\r\n              ]\r\n            : undefined\r\n        }\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default MemoIcon;\r\n"]},"metadata":{},"sourceType":"module"}