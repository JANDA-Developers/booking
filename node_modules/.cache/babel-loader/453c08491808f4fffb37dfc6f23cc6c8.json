{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\src\\\\components\\\\specification\\\\Specification.tsx\";\nimport JDbox from \"../../atoms/box/JDbox\";\nimport { useState } from \"react\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport { autoHypen, isEmpty, autoComma } from \"../../utils/utils\";\nimport { DEFAULT_PRODUCT, DEFAULT_APP_INFO_REQUEST } from \"../../types/defaults\";\nimport JDselect from \"../../atoms/forms/selectBox/SelectBox\";\nimport InputText from \"../../atoms/forms/inputText/InputText\";\nimport { SELECT_PRODUCT_TYPE_OP, HouseStatus, PRODUCT_STATUS_OP } from \"../../types/enum\";\nimport Button from \"../../atoms/button/Button\";\nimport CheckBox from \"../../atoms/forms/checkBox/CheckBox\";\nimport { useSelect, useCheckBox, useInput, useDayPicker, useModal, LANG, useDrawer } from \"../../hooks/hook\";\nimport { to4YMMDD } from \"../../utils/setMidNight\";\nimport DayPickerModal from \"../dayPickerModal/DayPickerModal\";\nimport { inOr } from \"../../utils/C\";\nimport Drawer from \"../../atoms/drawer/Drawer\";\nimport { IconSize } from \"../../atoms/icons/Icons\";\nexport var SpecificAtion = function SpecificAtion(_ref) {\n  var specification = _ref.specification,\n      loading = _ref.loading,\n      isAdmin = _ref.isAdmin,\n      updateUserForSu = _ref.updateUserForSu;\n  var _id = specification._id,\n      product = specification.product,\n      createdAt = specification.createdAt,\n      houseType = specification.houseType,\n      houseName = specification.name,\n      updatedAt = specification.updatedAt,\n      status = specification.status,\n      user = specification.user;\n\n  var _ref2 = product || DEFAULT_PRODUCT,\n      appliedUrl = _ref2.appliedUrl,\n      productId = _ref2._id,\n      productName = _ref2.name,\n      productCreateAt = _ref2.createdAt,\n      productPrice = _ref2.price,\n      existingHostApp = _ref2.existingHostApp,\n      description = _ref2.description,\n      layoutPrice = _ref2.layoutPrice,\n      roomCount = _ref2.roomCount,\n      roomCountExtraCharge = _ref2.roomCountExtraCharge,\n      appInfoRequested = _ref2.appInfoRequested,\n      layoutPricePaid = _ref2.layoutPricePaid,\n      productType = _ref2.productType,\n      canHaveHostApp = _ref2.canHaveHostApp,\n      discountedPrice = _ref2.discountedPrice,\n      bookingCountExtraCharge = _ref2.bookingCountExtraCharge,\n      expireDate = _ref2.expireDate,\n      daysLeftToExpire = _ref2.daysLeftToExpire,\n      isExpired = _ref2.isExpired;\n\n  var lastRequestIndex = !isEmpty(appInfoRequested) ? appInfoRequested.length - 1 : 0;\n  var inAppInfoRequested = !isEmpty(appInfoRequested) ? appInfoRequested[lastRequestIndex] : DEFAULT_APP_INFO_REQUEST;\n  var drawerHook = useDrawer(false);\n  var layoutType = inAppInfoRequested.layoutType,\n      useHostApp = inAppInfoRequested.useHostApp,\n      requestUrl = inAppInfoRequested.url;\n  if (!user) return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  });\n  var userName = user.name,\n      phoneNumber = user.phoneNumber; // HOOK\n\n  var HouseStatusHook = useSelect({\n    label: LANG(status || HouseStatus.WAIT),\n    value: status || HouseStatus.WAIT\n  });\n  var dayPickerModal = useModal(false);\n\n  var _useState = useState(productPrice || 0),\n      _useState2 = _slicedToArray(_useState, 2),\n      price = _useState2[0],\n      setPrice = _useState2[1];\n\n  var layOutPricePaidHook = useCheckBox(layoutPricePaid || false);\n  var applideUrlHook = useInput(appliedUrl || \"\");\n  var haveHostAppHook = useCheckBox(existingHostApp);\n  var descHook = useInput(description || \"\");\n  var expireDateHook = useDayPicker(expireDate, expireDate);\n\n  var handleUpdateClick = function handleUpdateClick() {\n    if (!expireDateHook.from) return;\n    updateUserForSu({\n      variables: {\n        productParams: {\n          appliedUrl: applideUrlHook.value,\n          description: descHook.value,\n          existingHostApp: haveHostAppHook.checked,\n          price: price,\n          layoutPricePaid: layOutPricePaidHook.checked,\n          expireDate: expireDateHook.from\n        },\n        productId: productId,\n        houseId: specification._id,\n        status: inOr(HouseStatusHook.selectedOption, \"value\", HouseStatus.WAIT)\n      }\n    });\n  };\n\n  var columns = [{\n    title: LANG(\"applied_product_type\"),\n    value: productName,\n    adminUi: React.createElement(JDselect, {\n      options: SELECT_PRODUCT_TYPE_OP,\n      selectedOption: {\n        value: productName,\n        label: productName\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    })\n  }, {\n    title: LANG(\"houseName\"),\n    value: houseName\n  }, {\n    title: LANG(\"house_type\"),\n    value: houseType\n  }, {\n    title: LANG(\"applicant\"),\n    value: userName\n  }, {\n    title: LANG(\"is_apply_homepage\"),\n    value: useHostApp ? \"Y\" : \"N\"\n  }, {\n    title: LANG(\"monthly_fee\"),\n    value: productPrice + \" / \".concat(LANG(\"month\")),\n    adminUi: React.createElement(InputText, {\n      comma: true,\n      onChange: setPrice,\n      value: price,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    })\n  }, {\n    title: LANG(\"expire_date\"),\n    value: to4YMMDD(expireDate),\n    adminUi: React.createElement(InputText, {\n      onClick: function onClick() {\n        dayPickerModal.openModal();\n      },\n      value: \"\".concat(to4YMMDD(expireDateHook.from)).concat(LANG(\"till\")),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })\n  }, {\n    title: LANG(\"left_days\"),\n    value: \"\".concat(daysLeftToExpire),\n    adminUi: \"\".concat(daysLeftToExpire)\n  }, {\n    title: LANG(\"current_status\"),\n    value: status || \"\",\n    adminUi: React.createElement(JDselect, Object.assign({}, HouseStatusHook, {\n      options: PRODUCT_STATUS_OP,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }))\n  }, {\n    title: LANG(\"product_memo\"),\n    value: description || \"\",\n    adminUi: React.createElement(InputText, Object.assign({}, descHook, {\n      textarea: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }))\n  }];\n\n  if (drawerHook.open) {\n    columns = [].concat(_toConsumableArray(columns), [{\n      title: LANG(\"homepage_application_date\"),\n      value: moment(productCreateAt).local().format(\"YY\".concat(LANG(\"year\"), \" MM\").concat(LANG(\"month\"), \" DD\").concat(LANG(\"date\"), \" HH:mm\"))\n    }, {\n      title: LANG(\"homepage_complete_estimated_date\"),\n      value: moment(productCreateAt).add(3, \"days\").format(\"YY\".concat(LANG(\"year\"), \" MM\").concat(LANG(\"month\"), \" DD\").concat(LANG(\"date\"), \" HH:mm\"))\n    }, {\n      title: LANG(\"applicant_contact\"),\n      value: autoHypen(phoneNumber)\n    }, {\n      title: LANG(\"homepage_develope_status\"),\n      value: existingHostApp ? LANG(\"completed\") : LANG(\"waiting\"),\n      adminUi: React.createElement(CheckBox, Object.assign({}, haveHostAppHook, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }))\n    }, {\n      title: LANG(\"apply_layout\"),\n      value: useHostApp ? layoutType : \"\"\n    }, {\n      title: LANG(\"request_url\"),\n      value: requestUrl\n    }, {\n      title: LANG(\"applied_url\"),\n      value: \"\".concat(applideUrlHook.value),\n      adminUi: React.createElement(InputText, Object.assign({}, applideUrlHook, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }))\n    }, {\n      title: LANG(\"layout_cost\"),\n      value: autoComma(layoutPrice || 0),\n      adminUi: React.createElement(InputText, {\n        readOnly: true,\n        value: layoutPrice,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      })\n    }, {\n      title: LANG(\"is_layout_paied\"),\n      value: layoutPricePaid ? \"Y\" : \"N\",\n      adminUi: React.createElement(CheckBox, Object.assign({}, layOutPricePaidHook, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }))\n    }]);\n  }\n\n  return React.createElement(JDbox, {\n    className: \"JDmargin-bottom0\",\n    mode: \"table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"JDtable\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }, LANG(\"item\")), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }, LANG(\"status\")))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247\n    },\n    __self: this\n  }, columns.map(function (column) {\n    return React.createElement(\"tr\", {\n      key: column.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, column.title), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, isAdmin ? column.adminUi || column.value : column.value));\n  }))), React.createElement(\"div\", {\n    className: \"JDstandard-margin-bottom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256\n    },\n    __self: this\n  }, React.createElement(Drawer, Object.assign({\n    size: IconSize.MEDIUM\n  }, drawerHook, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257\n    },\n    __self: this\n  }))), React.createElement(DayPickerModal, Object.assign({\n    autoClose: true,\n    modalHook: dayPickerModal\n  }, expireDateHook, {\n    format: \"YY\".concat(LANG(\"year\"), \" MM\").concat(LANG(\"month\"), \" DD\").concat(LANG(\"date\"), \" \").concat(LANG(\"till\")),\n    displayInfo: false,\n    isRange: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259\n    },\n    __self: this\n  })), isAdmin && React.createElement(Button, {\n    className: \"JDstandard-margin0\",\n    onClick: function onClick() {\n      handleUpdateClick();\n    },\n    label: LANG(\"change\"),\n    thema: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270\n    },\n    __self: this\n  }));\n};\nexport default SpecificAtion;","map":{"version":3,"sources":["C:/Users/김민재/Desktop/projects/jd-api-server-client/src/components/specification/Specification.tsx"],"names":["JDbox","useState","moment","React","autoHypen","isEmpty","autoComma","DEFAULT_PRODUCT","DEFAULT_APP_INFO_REQUEST","JDselect","InputText","SELECT_PRODUCT_TYPE_OP","HouseStatus","PRODUCT_STATUS_OP","Button","CheckBox","useSelect","useCheckBox","useInput","useDayPicker","useModal","LANG","useDrawer","to4YMMDD","DayPickerModal","inOr","Drawer","IconSize","SpecificAtion","specification","loading","isAdmin","updateUserForSu","_id","product","createdAt","houseType","houseName","name","updatedAt","status","user","appliedUrl","productId","productName","productCreateAt","productPrice","price","existingHostApp","description","layoutPrice","roomCount","roomCountExtraCharge","appInfoRequested","layoutPricePaid","productType","canHaveHostApp","discountedPrice","bookingCountExtraCharge","expireDate","daysLeftToExpire","isExpired","lastRequestIndex","length","inAppInfoRequested","drawerHook","layoutType","useHostApp","requestUrl","url","userName","phoneNumber","HouseStatusHook","label","WAIT","value","dayPickerModal","setPrice","layOutPricePaidHook","applideUrlHook","haveHostAppHook","descHook","expireDateHook","handleUpdateClick","from","variables","productParams","checked","houseId","selectedOption","columns","title","adminUi","openModal","open","local","format","add","map","column","MEDIUM"],"mappings":"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","sourcesContent":["import JDbox from \"../../atoms/box/JDbox\";\r\nimport {\r\n  getSpecification_GetHouse_house,\r\n  updateUserForSU,\r\n  updateUserForSUVariables\r\n} from \"../../types/api\";\r\nimport {useState} from \"react\";\r\nimport moment from \"moment\";\r\nimport React from \"react\";\r\nimport {autoHypen, isEmpty, autoComma} from \"../../utils/utils\";\r\nimport {DEFAULT_PRODUCT, DEFAULT_APP_INFO_REQUEST} from \"../../types/defaults\";\r\nimport JDselect from \"../../atoms/forms/selectBox/SelectBox\";\r\nimport InputText from \"../../atoms/forms/inputText/InputText\";\r\nimport {\r\n  SELECT_PRODUCT_TYPE_OP,\r\n  HouseStatus,\r\n  PRODUCT_STATUS_OP\r\n} from \"../../types/enum\";\r\nimport Button from \"../../atoms/button/Button\";\r\nimport CheckBox from \"../../atoms/forms/checkBox/CheckBox\";\r\nimport {\r\n  useSelect,\r\n  useCheckBox,\r\n  useInput,\r\n  useDayPicker,\r\n  useModal,\r\n  LANG,\r\n  useDrawer\r\n} from \"../../hooks/hook\";\r\nimport {MutationFn} from \"react-apollo\";\r\nimport {to4YMMDD} from \"../../utils/setMidNight\";\r\nimport DayPickerModal from \"../dayPickerModal/DayPickerModal\";\r\nimport {inOr} from \"../../utils/C\";\r\nimport Drawer from \"../../atoms/drawer/Drawer\";\r\nimport {IconSize} from \"../../atoms/icons/Icons\";\r\n\r\ninterface IProps {\r\n  specification: getSpecification_GetHouse_house;\r\n  updateUserForSu: MutationFn<updateUserForSU, updateUserForSUVariables>;\r\n  loading: boolean;\r\n  isAdmin?: boolean;\r\n}\r\n\r\nexport const SpecificAtion: React.FC<IProps> = ({\r\n  specification,\r\n  loading,\r\n  isAdmin,\r\n  updateUserForSu\r\n}) => {\r\n  const {\r\n    _id,\r\n    product,\r\n    createdAt,\r\n    houseType,\r\n    name: houseName,\r\n    updatedAt,\r\n    status,\r\n    user\r\n  } = specification;\r\n\r\n  const {\r\n    appliedUrl,\r\n    _id: productId,\r\n    name: productName,\r\n    createdAt: productCreateAt,\r\n    price: productPrice,\r\n    existingHostApp,\r\n    description,\r\n    layoutPrice,\r\n    roomCount,\r\n    roomCountExtraCharge,\r\n    appInfoRequested,\r\n    layoutPricePaid,\r\n    productType,\r\n    canHaveHostApp,\r\n    discountedPrice,\r\n    bookingCountExtraCharge,\r\n    expireDate,\r\n    daysLeftToExpire,\r\n    isExpired\r\n  } = product || DEFAULT_PRODUCT;\r\n\r\n  const lastRequestIndex = !isEmpty(appInfoRequested)\r\n    ? appInfoRequested.length - 1\r\n    : 0;\r\n  const inAppInfoRequested = !isEmpty(appInfoRequested)\r\n    ? appInfoRequested[lastRequestIndex]\r\n    : DEFAULT_APP_INFO_REQUEST;\r\n\r\n  const drawerHook = useDrawer(false);\r\n\r\n  const {layoutType, useHostApp, url: requestUrl} = inAppInfoRequested;\r\n\r\n  if (!user) return <div />;\r\n  const {name: userName, phoneNumber} = user;\r\n  // HOOK\r\n  const HouseStatusHook = useSelect({\r\n    label: LANG(status || HouseStatus.WAIT),\r\n    value: status || HouseStatus.WAIT\r\n  });\r\n  const dayPickerModal = useModal(false);\r\n  const [price, setPrice] = useState(productPrice || 0);\r\n  const layOutPricePaidHook = useCheckBox(layoutPricePaid || false);\r\n  const applideUrlHook = useInput(appliedUrl || \"\");\r\n  const haveHostAppHook = useCheckBox(existingHostApp);\r\n  const descHook = useInput(description || \"\");\r\n  const expireDateHook = useDayPicker(expireDate, expireDate);\r\n\r\n  const handleUpdateClick = () => {\r\n    if (!expireDateHook.from) return;\r\n    updateUserForSu({\r\n      variables: {\r\n        productParams: {\r\n          appliedUrl: applideUrlHook.value,\r\n          description: descHook.value,\r\n          existingHostApp: haveHostAppHook.checked,\r\n          price,\r\n          layoutPricePaid: layOutPricePaidHook.checked,\r\n          expireDate: expireDateHook.from!\r\n        },\r\n        productId: productId,\r\n        houseId: specification._id,\r\n        status: inOr(HouseStatusHook.selectedOption, \"value\", HouseStatus.WAIT)\r\n      }\r\n    });\r\n  };\r\n\r\n  let columns: {\r\n    title: string;\r\n    value: string;\r\n    adminUi?: JSX.Element | JSX.Element[] | string;\r\n  }[] = [\r\n    {\r\n      title: LANG(\"applied_product_type\"),\r\n      value: productName,\r\n      adminUi: (\r\n        <JDselect\r\n          options={SELECT_PRODUCT_TYPE_OP}\r\n          selectedOption={{value: productName, label: productName}}\r\n        />\r\n      )\r\n    },\r\n    {title: LANG(\"houseName\"), value: houseName},\r\n    {title: LANG(\"house_type\"), value: houseType},\r\n    {title: LANG(\"applicant\"), value: userName},\r\n    {\r\n      title: LANG(\"is_apply_homepage\"),\r\n      value: useHostApp ? \"Y\" : \"N\"\r\n    },\r\n    {\r\n      title: LANG(\"monthly_fee\"),\r\n      value: productPrice + ` / ${LANG(\"month\")}`,\r\n      adminUi: <InputText comma onChange={setPrice} value={price} />\r\n    },\r\n    {\r\n      title: LANG(\"expire_date\"),\r\n      value: to4YMMDD(expireDate),\r\n      adminUi: (\r\n        <InputText\r\n          onClick={() => {\r\n            dayPickerModal.openModal();\r\n          }}\r\n          value={`${to4YMMDD(expireDateHook.from)}${LANG(\"till\")}`}\r\n        />\r\n      )\r\n    },\r\n    {\r\n      title: LANG(\"left_days\"),\r\n      value: `${daysLeftToExpire}`,\r\n      adminUi: `${daysLeftToExpire}`\r\n    },\r\n    {\r\n      title: LANG(\"current_status\"),\r\n      value: status || \"\",\r\n      adminUi: <JDselect {...HouseStatusHook} options={PRODUCT_STATUS_OP} />\r\n    },\r\n    {\r\n      title: LANG(\"product_memo\"),\r\n      value: description || \"\",\r\n      adminUi: <InputText {...descHook} textarea />\r\n    }\r\n  ];\r\n\r\n  if (drawerHook.open) {\r\n    columns = [\r\n      ...columns,\r\n      {\r\n        title: LANG(\"homepage_application_date\"),\r\n        value: moment(productCreateAt)\r\n          .local()\r\n          .format(\r\n            `YY${LANG(\"year\")} MM${LANG(\"month\")} DD${LANG(\"date\")} HH:mm`\r\n          )\r\n      },\r\n      {\r\n        title: LANG(\"homepage_complete_estimated_date\"),\r\n        value: moment(productCreateAt)\r\n          .add(3, \"days\")\r\n          .format(\r\n            `YY${LANG(\"year\")} MM${LANG(\"month\")} DD${LANG(\"date\")} HH:mm`\r\n          )\r\n      },\r\n      {\r\n        title: LANG(\"applicant_contact\"),\r\n        value: autoHypen(phoneNumber)\r\n      },\r\n      {\r\n        title: LANG(\"homepage_develope_status\"),\r\n        value: existingHostApp ? LANG(\"completed\") : LANG(\"waiting\"),\r\n        adminUi: <CheckBox {...haveHostAppHook} />\r\n      },\r\n      {\r\n        title: LANG(\"apply_layout\"),\r\n        value: useHostApp ? layoutType : \"\"\r\n      },\r\n      {\r\n        title: LANG(\"request_url\"),\r\n        value: requestUrl\r\n      },\r\n      {\r\n        title: LANG(\"applied_url\"),\r\n        value: `${applideUrlHook.value}`,\r\n        adminUi: <InputText {...applideUrlHook} />\r\n      },\r\n      {\r\n        title: LANG(\"layout_cost\"),\r\n        value: autoComma(layoutPrice || 0),\r\n        adminUi: <InputText readOnly value={layoutPrice} />\r\n      },\r\n      {\r\n        title: LANG(\"is_layout_paied\"),\r\n        value: layoutPricePaid ? \"Y\" : \"N\",\r\n        adminUi: <CheckBox {...layOutPricePaidHook} />\r\n      }\r\n    ];\r\n  }\r\n\r\n  return (\r\n    <JDbox className=\"JDmargin-bottom0\" mode=\"table\">\r\n      <table className=\"JDtable\">\r\n        <thead>\r\n          <tr>\r\n            <th>{LANG(\"item\")}</th>\r\n            <th>{LANG(\"status\")}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {columns.map(column => (\r\n            <tr key={column.title}>\r\n              <td>{column.title}</td>\r\n              <td>{isAdmin ? column.adminUi || column.value : column.value}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      <div className=\"JDstandard-margin-bottom\">\r\n        <Drawer size={IconSize.MEDIUM} {...drawerHook} />\r\n      </div>\r\n      <DayPickerModal\r\n        autoClose\r\n        modalHook={dayPickerModal}\r\n        {...expireDateHook}\r\n        format={`YY${LANG(\"year\")} MM${LANG(\"month\")} DD${LANG(\"date\")} ${LANG(\r\n          \"till\"\r\n        )}`}\r\n        displayInfo={false}\r\n        isRange={false}\r\n      />\r\n      {isAdmin && (\r\n        <Button\r\n          className=\"JDstandard-margin0\"\r\n          onClick={() => {\r\n            handleUpdateClick();\r\n          }}\r\n          label={LANG(\"change\")}\r\n          thema=\"primary\"\r\n        />\r\n      )}\r\n    </JDbox>\r\n  );\r\n};\r\n\r\nexport default SpecificAtion;\r\n"]},"metadata":{},"sourceType":"module"}