{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\src\\\\components\\\\guestSearchInput\\\\GuestSearchInputWrap.tsx\";\nimport React, { useState } from \"react\";\nimport GuestSearchInput from \"./GuestSearchInput\";\nimport { queryDataFormater } from \"../../utils/utils\";\nimport { GET_BOOKINGS } from \"../../queries\";\nimport { Query } from \"react-apollo\";\nimport { isYYYYMMDD, isNumberMinMax } from \"../../utils/inputValidations\";\n\nvar GetBookingsQuery =\n/*#__PURE__*/\nfunction (_Query) {\n  _inherits(GetBookingsQuery, _Query);\n\n  function GetBookingsQuery() {\n    _classCallCheck(this, GetBookingsQuery);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(GetBookingsQuery).apply(this, arguments));\n  }\n\n  return GetBookingsQuery;\n}(Query);\n\nvar GuestSearchInputWrap = function GuestSearchInputWrap(_ref) {\n  var context = _ref.context;\n  var house = context.house;\n  var houseId = \"\";\n  houseId = house ? house._id : \"\";\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      onTypeValue = _useState2[0],\n      setType = _useState2[1];\n\n  var searchFilterCreater = function searchFilterCreater(value) {\n    var isPhoneNumber = isNumberMinMax(value, 4, 11);\n    return {\n      phoneNumnber: isPhoneNumber && !isYYYYMMDD(value) ? value : undefined,\n      name: !isPhoneNumber && !isYYYYMMDD(value) ? value : undefined,\n      stayDate: isYYYYMMDD(value) ? value : undefined,\n      createdAt: undefined\n    };\n  };\n\n  var filter = searchFilterCreater(onTypeValue);\n  return React.createElement(GetBookingsQuery, {\n    skip: !houseId || !filter.name && !filter.phoneNumnber && !filter.stayDate,\n    query: GET_BOOKINGS,\n    variables: {\n      houseId: houseId || \"\",\n      count: 10,\n      page: 1,\n      filter: filter\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, function (_ref2) {\n    var bookingsData = _ref2.data,\n        loading = _ref2.loading,\n        error = _ref2.error;\n    var bookings = queryDataFormater(bookingsData, \"GetBookings\", \"bookings\", undefined);\n    return React.createElement(GuestSearchInput, {\n      context: context,\n      bookings: bookings || [],\n      onTypeValue: onTypeValue,\n      setType: setType,\n      loading: loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    });\n  });\n};\n\nexport default GuestSearchInputWrap;","map":{"version":3,"sources":["C:/Users/김민재/Desktop/projects/jd-api-server-client/src/components/guestSearchInput/GuestSearchInputWrap.tsx"],"names":["React","useState","GuestSearchInput","queryDataFormater","GET_BOOKINGS","Query","isYYYYMMDD","isNumberMinMax","GetBookingsQuery","GuestSearchInputWrap","context","house","houseId","_id","onTypeValue","setType","searchFilterCreater","value","isPhoneNumber","phoneNumnber","undefined","name","stayDate","createdAt","filter","count","page","bookingsData","data","loading","error","bookings"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,SAAQC,iBAAR,QAAgC,mBAAhC;AACA,SAAQC,YAAR,QAA2B,eAA3B;AACA,SAAQC,KAAR,QAAoB,cAApB;AAEA,SAAQC,UAAR,EAAoBC,cAApB,QAAyC,8BAAzC;;IAGMC,gB;;;;;;;;;;;;EAAyBH,K;;AAM/B,IAAMI,oBAAsC,GAAG,SAAzCA,oBAAyC,OAAe;AAAA,MAAbC,OAAa,QAAbA,OAAa;AAAA,MACrDC,KADqD,GAC5CD,OAD4C,CACrDC,KADqD;AAE5D,MAAIC,OAAO,GAAG,EAAd;AACAA,EAAAA,OAAO,GAAGD,KAAK,GAAGA,KAAK,CAACE,GAAT,GAAe,EAA9B;;AAH4D,kBAK7BZ,QAAQ,CAAS,EAAT,CALqB;AAAA;AAAA,MAKrDa,WALqD;AAAA,MAKxCC,OALwC;;AAO5D,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,KAAD,EAAmB;AAC7C,QAAMC,aAAa,GAAGX,cAAc,CAACU,KAAD,EAAQ,CAAR,EAAW,EAAX,CAApC;AAEA,WAAO;AACLE,MAAAA,YAAY,EAAED,aAAa,IAAI,CAACZ,UAAU,CAACW,KAAD,CAA5B,GAAsCA,KAAtC,GAA8CG,SADvD;AAELC,MAAAA,IAAI,EAAE,CAACH,aAAD,IAAkB,CAACZ,UAAU,CAACW,KAAD,CAA7B,GAAuCA,KAAvC,GAA+CG,SAFhD;AAGLE,MAAAA,QAAQ,EAAEhB,UAAU,CAACW,KAAD,CAAV,GAAoBA,KAApB,GAA4BG,SAHjC;AAILG,MAAAA,SAAS,EAAEH;AAJN,KAAP;AAMD,GATD;;AAWA,MAAMI,MAAM,GAAGR,mBAAmB,CAACF,WAAD,CAAlC;AAEA,SACE,oBAAC,gBAAD;AACE,IAAA,IAAI,EACF,CAACF,OAAD,IAAa,CAACY,MAAM,CAACH,IAAR,IAAgB,CAACG,MAAM,CAACL,YAAxB,IAAwC,CAACK,MAAM,CAACF,QAFjE;AAIE,IAAA,KAAK,EAAElB,YAJT;AAKE,IAAA,SAAS,EAAE;AACTQ,MAAAA,OAAO,EAAEA,OAAO,IAAI,EADX;AAETa,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,IAAI,EAAE,CAHG;AAITF,MAAAA,MAAM,EAAEA;AAJC,KALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAYG,iBAA0C;AAAA,QAAlCG,YAAkC,SAAxCC,IAAwC;AAAA,QAApBC,OAAoB,SAApBA,OAAoB;AAAA,QAAXC,KAAW,SAAXA,KAAW;AACzC,QAAMC,QAAQ,GAAG5B,iBAAiB,CAChCwB,YADgC,EAEhC,aAFgC,EAGhC,UAHgC,EAIhCP,SAJgC,CAAlC;AAOA,WACE,oBAAC,gBAAD;AACE,MAAA,OAAO,EAAEV,OADX;AAEE,MAAA,QAAQ,EAAEqB,QAAQ,IAAI,EAFxB;AAGE,MAAA,WAAW,EAAEjB,WAHf;AAIE,MAAA,OAAO,EAAEC,OAJX;AAKE,MAAA,OAAO,EAAEc,OALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AASD,GA7BH,CADF;AAiCD,CArDD;;AAuDA,eAAepB,oBAAf","sourcesContent":["import React, {useState} from \"react\";\r\nimport GuestSearchInput from \"./GuestSearchInput\";\r\nimport {queryDataFormater} from \"../../utils/utils\";\r\nimport {GET_BOOKINGS} from \"../../queries\";\r\nimport {Query} from \"react-apollo\";\r\nimport {getBookings, getBookingsVariables} from \"../../types/api\";\r\nimport {isYYYYMMDD, isNumberMinMax} from \"../../utils/inputValidations\";\r\nimport {IContext} from \"../../pages/MiddleServerRouter\";\r\n\r\nclass GetBookingsQuery extends Query<getBookings, getBookingsVariables> {}\r\n\r\ninterface IProps {\r\n  context: IContext;\r\n}\r\n\r\nconst GuestSearchInputWrap: React.FC<IProps> = ({context}) => {\r\n  const {house} = context;\r\n  let houseId = \"\";\r\n  houseId = house ? house._id : \"\";\r\n\r\n  const [onTypeValue, setType] = useState<string>(\"\");\r\n\r\n  const searchFilterCreater = (value: string) => {\r\n    const isPhoneNumber = isNumberMinMax(value, 4, 11);\r\n\r\n    return {\r\n      phoneNumnber: isPhoneNumber && !isYYYYMMDD(value) ? value : undefined,\r\n      name: !isPhoneNumber && !isYYYYMMDD(value) ? value : undefined,\r\n      stayDate: isYYYYMMDD(value) ? value : undefined,\r\n      createdAt: undefined\r\n    };\r\n  };\r\n\r\n  const filter = searchFilterCreater(onTypeValue);\r\n\r\n  return (\r\n    <GetBookingsQuery\r\n      skip={\r\n        !houseId || (!filter.name && !filter.phoneNumnber && !filter.stayDate)\r\n      }\r\n      query={GET_BOOKINGS}\r\n      variables={{\r\n        houseId: houseId || \"\",\r\n        count: 10,\r\n        page: 1,\r\n        filter: filter\r\n      }}\r\n    >\r\n      {({data: bookingsData, loading, error}) => {\r\n        const bookings = queryDataFormater(\r\n          bookingsData,\r\n          \"GetBookings\",\r\n          \"bookings\",\r\n          undefined\r\n        );\r\n\r\n        return (\r\n          <GuestSearchInput\r\n            context={context}\r\n            bookings={bookings || []}\r\n            onTypeValue={onTypeValue}\r\n            setType={setType}\r\n            loading={loading}\r\n          />\r\n        );\r\n      }}\r\n    </GetBookingsQuery>\r\n  );\r\n};\r\n\r\nexport default GuestSearchInputWrap;\r\n"]},"metadata":{},"sourceType":"module"}