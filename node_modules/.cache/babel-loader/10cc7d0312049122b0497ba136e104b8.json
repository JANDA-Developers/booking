{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\src\\\\components\\\\shortStatisces\\\\DayCheckInWrap.tsx\";\nimport React from \"react\";\nimport { Query } from \"react-apollo\";\nimport DayCheckIn from \"./DayCheckIn\";\nimport { GET_BOOKINGS } from \"../../queries\";\nimport { queryDataFormater } from \"../../utils/utils\";\nimport moment from \"moment\";\nimport { useDayPicker } from \"../../hooks/hook\";\n\nvar GetBookingsQu =\n/*#__PURE__*/\nfunction (_Query) {\n  _inherits(GetBookingsQu, _Query);\n\n  function GetBookingsQu() {\n    _classCallCheck(this, GetBookingsQu);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(GetBookingsQu).apply(this, arguments));\n  }\n\n  return GetBookingsQu;\n}(Query);\n\nvar DayCheckInWrap = function DayCheckInWrap(_ref) {\n  var context = _ref.context;\n  var house = context.house;\n  var dayPickerHook = useDayPicker(new Date(), new Date());\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, React.createElement(GetBookingsQu, {\n    skip: !house._id,\n    variables: {\n      houseId: house._id,\n      filter: {\n        stayDate: new Date()\n      },\n      count: 999999,\n      page: 1\n    } // GET_CHECKINS 로변경\n    ,\n    query: GET_BOOKINGS,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, function (_ref2) {\n    var Data = _ref2.data,\n        getGuestsLoading = _ref2.loading;\n    var bookings = queryDataFormater(Data, \"GetBookings\", \"bookings\", []) || [];\n    var bookingsCheckInToday = bookings.filter(function (booking) {\n      return moment(booking.checkIn).isSame(dayPickerHook.from || new Date(), \"day\");\n    });\n    var bookingsCount = bookingsCheckInToday.length;\n    var bookingsCheckInCount = bookingsCheckInToday.filter(function (booking) {\n      return booking.checkInInfo.isIn;\n    }).length;\n    var info = {\n      bookingsCheckInToday: bookingsCheckInToday,\n      bookingsCount: bookingsCount,\n      bookingsCheckInCount: bookingsCheckInCount\n    };\n    return React.createElement(DayCheckIn, {\n      loading: getGuestsLoading,\n      context: context,\n      dayPickerHook: dayPickerHook,\n      info: info,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    });\n  }));\n};\n\nexport default DayCheckInWrap;","map":{"version":3,"sources":["C:/Users/김민재/Desktop/projects/jd-api-server-client/src/components/shortStatisces/DayCheckInWrap.tsx"],"names":["React","Query","DayCheckIn","GET_BOOKINGS","queryDataFormater","moment","useDayPicker","GetBookingsQu","DayCheckInWrap","context","house","dayPickerHook","Date","_id","houseId","filter","stayDate","count","page","Data","data","getGuestsLoading","loading","bookings","bookingsCheckInToday","booking","checkIn","isSame","from","bookingsCount","length","bookingsCheckInCount","checkInInfo","isIn","info"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,QAAoB,cAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AAEA,SAAQC,YAAR,QAA2B,eAA3B;AAEA,SAAQC,iBAAR,QAAgC,mBAAhC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAAQC,YAAR,QAA2B,kBAA3B;;IAMMC,a;;;;;;;;;;;;EAAsBN,K;;AAE5B,IAAMO,cAAgC,GAAG,SAAnCA,cAAmC,OAAe;AAAA,MAAbC,OAAa,QAAbA,OAAa;AAAA,MAC/CC,KAD+C,GACtCD,OADsC,CAC/CC,KAD+C;AAEtD,MAAMC,aAAa,GAAGL,YAAY,CAAC,IAAIM,IAAJ,EAAD,EAAa,IAAIA,IAAJ,EAAb,CAAlC;AAEA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,aAAD;AACE,IAAA,IAAI,EAAE,CAACF,KAAK,CAACG,GADf;AAEE,IAAA,SAAS,EAAE;AACTC,MAAAA,OAAO,EAAEJ,KAAK,CAACG,GADN;AAETE,MAAAA,MAAM,EAAE;AACNC,QAAAA,QAAQ,EAAE,IAAIJ,IAAJ;AADJ,OAFC;AAKTK,MAAAA,KAAK,EAAE,MALE;AAMTC,MAAAA,IAAI,EAAE;AANG,KAFb,CAUE;AAVF;AAWE,IAAA,KAAK,EAAEf,YAXT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaG,iBAA6C;AAAA,QAArCgB,IAAqC,SAA3CC,IAA2C;AAAA,QAAtBC,gBAAsB,SAA/BC,OAA+B;AAC5C,QAAMC,QAAQ,GACZnB,iBAAiB,CAACe,IAAD,EAAO,aAAP,EAAsB,UAAtB,EAAkC,EAAlC,CAAjB,IAA0D,EAD5D;AAGA,QAAMK,oBAAoB,GAAGD,QAAQ,CAACR,MAAT,CAAgB,UAAAU,OAAO;AAAA,aAClDpB,MAAM,CAACoB,OAAO,CAACC,OAAT,CAAN,CAAwBC,MAAxB,CACEhB,aAAa,CAACiB,IAAd,IAAsB,IAAIhB,IAAJ,EADxB,EAEE,KAFF,CADkD;AAAA,KAAvB,CAA7B;AAOA,QAAMiB,aAAa,GAAGL,oBAAoB,CAACM,MAA3C;AACA,QAAMC,oBAAoB,GAAGP,oBAAoB,CAACT,MAArB,CAC3B,UAAAU,OAAO;AAAA,aAAIA,OAAO,CAACO,WAAR,CAAoBC,IAAxB;AAAA,KADoB,EAE3BH,MAFF;AAIA,QAAMI,IAAI,GAAG;AACXV,MAAAA,oBAAoB,EAApBA,oBADW;AAEXK,MAAAA,aAAa,EAAbA,aAFW;AAGXE,MAAAA,oBAAoB,EAApBA;AAHW,KAAb;AAMA,WACE,oBAAC,UAAD;AACE,MAAA,OAAO,EAAEV,gBADX;AAEE,MAAA,OAAO,EAAEZ,OAFX;AAGE,MAAA,aAAa,EAAEE,aAHjB;AAIE,MAAA,IAAI,EAAEuB,IAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAQD,GA3CH,CADF,CADF;AAiDD,CArDD;;AAuDA,eAAe1B,cAAf","sourcesContent":["import React from \"react\";\r\nimport {Query} from \"react-apollo\";\r\nimport DayCheckIn from \"./DayCheckIn\";\r\nimport {getBookings, getBookingsVariables} from \"../../types/api\";\r\nimport {GET_BOOKINGS} from \"../../queries\";\r\nimport {IContext} from \"../../pages/MiddleServerRouter\";\r\nimport {queryDataFormater} from \"../../utils/utils\";\r\nimport moment from \"moment\";\r\nimport {useDayPicker} from \"../../hooks/hook\";\r\n\r\ninterface IProps {\r\n  context: IContext;\r\n}\r\n\r\nclass GetBookingsQu extends Query<getBookings, getBookingsVariables> {}\r\n\r\nconst DayCheckInWrap: React.FC<IProps> = ({context}) => {\r\n  const {house} = context;\r\n  const dayPickerHook = useDayPicker(new Date(), new Date());\r\n\r\n  return (\r\n    <div>\r\n      <GetBookingsQu\r\n        skip={!house._id}\r\n        variables={{\r\n          houseId: house._id,\r\n          filter: {\r\n            stayDate: new Date()\r\n          },\r\n          count: 999999,\r\n          page: 1\r\n        }}\r\n        // GET_CHECKINS 로변경\r\n        query={GET_BOOKINGS}\r\n      >\r\n        {({data: Data, loading: getGuestsLoading}) => {\r\n          const bookings =\r\n            queryDataFormater(Data, \"GetBookings\", \"bookings\", []) || [];\r\n\r\n          const bookingsCheckInToday = bookings.filter(booking =>\r\n            moment(booking.checkIn).isSame(\r\n              dayPickerHook.from || new Date(),\r\n              \"day\"\r\n            )\r\n          );\r\n\r\n          const bookingsCount = bookingsCheckInToday.length;\r\n          const bookingsCheckInCount = bookingsCheckInToday.filter(\r\n            booking => booking.checkInInfo.isIn\r\n          ).length;\r\n\r\n          const info = {\r\n            bookingsCheckInToday,\r\n            bookingsCount,\r\n            bookingsCheckInCount\r\n          };\r\n\r\n          return (\r\n            <DayCheckIn\r\n              loading={getGuestsLoading}\r\n              context={context}\r\n              dayPickerHook={dayPickerHook}\r\n              info={info}\r\n            ></DayCheckIn>\r\n          );\r\n        }}\r\n      </GetBookingsQu>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DayCheckInWrap;\r\n"]},"metadata":{},"sourceType":"module"}