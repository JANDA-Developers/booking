{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\src\\\\components\\\\phoneVerificationModal\\\\PhoneVerificationModalWrap.tsx\";\nimport React from \"react\";\nimport { onCompletedMessage } from \"../../utils/utils\";\nimport { Mutation } from \"react-apollo\";\nimport PhoneVerificationModal from \"./PhoneVerificationModal\";\nimport { COMEPLETE_PHONE_VERIFICATION, GET_USER_INFO, START_PHONE_VERIFICATION_WITH_PHONE_NUMBER } from \"../../queries\";\nimport EerrorProtect from \"../../utils/errProtect\";\nimport { LANG } from \"../../hooks/hook\";\n\nvar StartPhoneVerificationMu =\n/*#__PURE__*/\nfunction (_Mutation) {\n  _inherits(StartPhoneVerificationMu, _Mutation);\n\n  function StartPhoneVerificationMu() {\n    _classCallCheck(this, StartPhoneVerificationMu);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(StartPhoneVerificationMu).apply(this, arguments));\n  }\n\n  return StartPhoneVerificationMu;\n}(Mutation);\n\nvar CompletePhoneVerification =\n/*#__PURE__*/\nfunction (_Mutation2) {\n  _inherits(CompletePhoneVerification, _Mutation2);\n\n  function CompletePhoneVerification() {\n    _classCallCheck(this, CompletePhoneVerification);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CompletePhoneVerification).apply(this, arguments));\n  }\n\n  return CompletePhoneVerification;\n}(Mutation);\n\nvar PhoneVerificationModalWrap = function PhoneVerificationModalWrap(_ref) {\n  var modalHook = _ref.modalHook,\n      _ref$onPhoneVerified = _ref.onPhoneVerified,\n      onPhoneVerified = _ref$onPhoneVerified === void 0 ? modalHook.info ? modalHook.info.onPhoneVerified : undefined : _ref$onPhoneVerified,\n      _ref$phoneNumber = _ref.phoneNumber,\n      phoneNumber = _ref$phoneNumber === void 0 ? modalHook.info ? modalHook.info.phoneNumber : undefined : _ref$phoneNumber;\n  return React.createElement(StartPhoneVerificationMu, {\n    variables: {\n      phoneNumber: phoneNumber\n    },\n    mutation: START_PHONE_VERIFICATION_WITH_PHONE_NUMBER,\n    onCompleted: function onCompleted(_ref2) {\n      var StartSenderVerification = _ref2.StartSenderVerification;\n      onCompletedMessage(StartSenderVerification, LANG(\"certification_number_sent\"), LANG(\"certification_number_sent_fail\"));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, function (startPhoneVerificationMu, _ref3) {\n    var startVerifiLoading = _ref3.loading;\n    return React.createElement(CompletePhoneVerification, {\n      mutation: COMEPLETE_PHONE_VERIFICATION,\n      onCompleted: function onCompleted(_ref4) {\n        var CompletePhoneVerification = _ref4.CompletePhoneVerification;\n        onCompletedMessage(CompletePhoneVerification, LANG(\"mobile_phone_verification_completed\"), LANG(\"mobile_phone_verification_failed\"));\n        modalHook.closeModal();\n\n        if (CompletePhoneVerification.ok) {// window.location.reload();\n          // onPhoneVerified && onPhoneVerified();\n        }\n      },\n      awaitRefetchQueries: true,\n      refetchQueries: [{\n        query: GET_USER_INFO\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, function (completePhoneVerificationMu, _ref5) {\n      var completePhoneVerificationLoding = _ref5.loading;\n      return React.createElement(PhoneVerificationModal, {\n        key: \"phoneVerification\".concat(modalHook.isOpen && \"--open\"),\n        startPhoneVerificationMu: startPhoneVerificationMu,\n        completePhoneVerificationMu: completePhoneVerificationMu,\n        muLoading: completePhoneVerificationLoding || startVerifiLoading,\n        phoneNumber: phoneNumber,\n        modalHook: modalHook,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      });\n    });\n  });\n};\n\nexport default EerrorProtect(PhoneVerificationModalWrap);","map":{"version":3,"sources":["C:/Users/김민재/Desktop/projects/jd-api-server-client/src/components/phoneVerificationModal/PhoneVerificationModalWrap.tsx"],"names":["React","onCompletedMessage","Mutation","PhoneVerificationModal","COMEPLETE_PHONE_VERIFICATION","GET_USER_INFO","START_PHONE_VERIFICATION_WITH_PHONE_NUMBER","EerrorProtect","LANG","StartPhoneVerificationMu","CompletePhoneVerification","PhoneVerificationModalWrap","modalHook","onPhoneVerified","info","undefined","phoneNumber","StartSenderVerification","startPhoneVerificationMu","startVerifiLoading","loading","closeModal","ok","query","completePhoneVerificationMu","completePhoneVerificationLoding","isOpen"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,kBAAR,QAAiC,mBAAjC;AACA,SAAQC,QAAR,QAAuB,cAAvB;AACA,OAAOC,sBAAP,MAAmC,0BAAnC;AAOA,SACEC,4BADF,EAEEC,aAFF,EAGEC,0CAHF,QAIO,eAJP;AAKA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,SAAmBC,IAAnB,QAA8B,kBAA9B;;IAEMC,wB;;;;;;;;;;;;EAAiCP,Q;;IAIjCQ,yB;;;;;;;;;;;;EAAkCR,Q;;AAiBxC,IAAMS,0BAA4C,GAAG,SAA/CA,0BAA+C;AAAA,MACnDC,SADmD,QACnDA,SADmD;AAAA,kCAEnDC,eAFmD;AAAA,MAEnDA,eAFmD,qCAEjCD,SAAS,CAACE,IAAV,GAAiBF,SAAS,CAACE,IAAV,CAAeD,eAAhC,GAAkDE,SAFjB;AAAA,8BAGnDC,WAHmD;AAAA,MAGnDA,WAHmD,iCAGrCJ,SAAS,CAACE,IAAV,GAAiBF,SAAS,CAACE,IAAV,CAAeE,WAAhC,GAA8CD,SAHT;AAAA,SAKnD,oBAAC,wBAAD;AACE,IAAA,SAAS,EAAE;AAACC,MAAAA,WAAW,EAAXA;AAAD,KADb;AAEE,IAAA,QAAQ,EAAEV,0CAFZ;AAGE,IAAA,WAAW,EAAE,4BAA+B;AAAA,UAA7BW,uBAA6B,SAA7BA,uBAA6B;AAC1ChB,MAAAA,kBAAkB,CAChBgB,uBADgB,EAEhBT,IAAI,CAAC,2BAAD,CAFY,EAGhBA,IAAI,CAAC,gCAAD,CAHY,CAAlB;AAKD,KATH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWG,UAACU,wBAAD,SAA6D;AAAA,QAAxBC,kBAAwB,SAAjCC,OAAiC;AAC5D,WACE,oBAAC,yBAAD;AACE,MAAA,QAAQ,EAAEhB,4BADZ;AAEE,MAAA,WAAW,EAAE,4BAAiC;AAAA,YAA/BM,yBAA+B,SAA/BA,yBAA+B;AAC5CT,QAAAA,kBAAkB,CAChBS,yBADgB,EAEhBF,IAAI,CAAC,qCAAD,CAFY,EAGhBA,IAAI,CAAC,kCAAD,CAHY,CAAlB;AAKAI,QAAAA,SAAS,CAACS,UAAV;;AACA,YAAIX,yBAAyB,CAACY,EAA9B,EAAkC,CAChC;AACA;AACD;AACF,OAbH;AAcE,MAAA,mBAAmB,MAdrB;AAeE,MAAA,cAAc,EAAE,CAAC;AAACC,QAAAA,KAAK,EAAElB;AAAR,OAAD,CAflB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAiBG,UACCmB,2BADD;AAAA,UAEWC,+BAFX,SAEEL,OAFF;AAAA,aAIC,oBAAC,sBAAD;AACE,QAAA,GAAG,6BAAsBR,SAAS,CAACc,MAAV,IAAoB,QAA1C,CADL;AAEE,QAAA,wBAAwB,EAAER,wBAF5B;AAGE,QAAA,2BAA2B,EAAEM,2BAH/B;AAIE,QAAA,SAAS,EAAEC,+BAA+B,IAAIN,kBAJhD;AAKE,QAAA,WAAW,EAAEH,WALf;AAME,QAAA,SAAS,EAAEJ,SANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJD;AAAA,KAjBH,CADF;AAiCD,GA7CH,CALmD;AAAA,CAArD;;AAsDA,eAAeL,aAAa,CAACI,0BAAD,CAA5B","sourcesContent":["import React from \"react\";\r\nimport {onCompletedMessage} from \"../../utils/utils\";\r\nimport {Mutation} from \"react-apollo\";\r\nimport PhoneVerificationModal from \"./PhoneVerificationModal\";\r\nimport {\r\n  completePhoneVerification,\r\n  completePhoneVerificationVariables,\r\n  startPhoneVerificationWithPhoneNumber,\r\n  startPhoneVerificationWithPhoneNumberVariables\r\n} from \"../../types/api\";\r\nimport {\r\n  COMEPLETE_PHONE_VERIFICATION,\r\n  GET_USER_INFO,\r\n  START_PHONE_VERIFICATION_WITH_PHONE_NUMBER\r\n} from \"../../queries\";\r\nimport EerrorProtect from \"../../utils/errProtect\";\r\nimport {IUseModal, LANG} from \"../../hooks/hook\";\r\n\r\nclass StartPhoneVerificationMu extends Mutation<\r\n  startPhoneVerificationWithPhoneNumber,\r\n  startPhoneVerificationWithPhoneNumberVariables\r\n> {}\r\nclass CompletePhoneVerification extends Mutation<\r\n  completePhoneVerification,\r\n  completePhoneVerificationVariables\r\n> {}\r\n\r\ninterface IPhoneVerifModalInfo {\r\n  phoneNumber?: string;\r\n  onPhoneVerified?(): void;\r\n  [foo: string]: any;\r\n}\r\n\r\ninterface IProps {\r\n  modalHook: IUseModal<IPhoneVerifModalInfo>;\r\n  phoneNumber?: string;\r\n  onPhoneVerified?(): void;\r\n}\r\n\r\nconst PhoneVerificationModalWrap: React.FC<IProps> = ({\r\n  modalHook,\r\n  onPhoneVerified = modalHook.info ? modalHook.info.onPhoneVerified : undefined,\r\n  phoneNumber = modalHook.info ? modalHook.info.phoneNumber : undefined\r\n}) => (\r\n  <StartPhoneVerificationMu\r\n    variables={{phoneNumber}}\r\n    mutation={START_PHONE_VERIFICATION_WITH_PHONE_NUMBER}\r\n    onCompleted={({StartSenderVerification}) => {\r\n      onCompletedMessage(\r\n        StartSenderVerification,\r\n        LANG(\"certification_number_sent\"),\r\n        LANG(\"certification_number_sent_fail\")\r\n      );\r\n    }}\r\n  >\r\n    {(startPhoneVerificationMu, {loading: startVerifiLoading}) => {\r\n      return (\r\n        <CompletePhoneVerification\r\n          mutation={COMEPLETE_PHONE_VERIFICATION}\r\n          onCompleted={({CompletePhoneVerification}) => {\r\n            onCompletedMessage(\r\n              CompletePhoneVerification,\r\n              LANG(\"mobile_phone_verification_completed\"),\r\n              LANG(\"mobile_phone_verification_failed\")\r\n            );\r\n            modalHook.closeModal();\r\n            if (CompletePhoneVerification.ok) {\r\n              // window.location.reload();\r\n              // onPhoneVerified && onPhoneVerified();\r\n            }\r\n          }}\r\n          awaitRefetchQueries\r\n          refetchQueries={[{query: GET_USER_INFO}]}\r\n        >\r\n          {(\r\n            completePhoneVerificationMu,\r\n            {loading: completePhoneVerificationLoding}\r\n          ) => (\r\n            <PhoneVerificationModal\r\n              key={`phoneVerification${modalHook.isOpen && \"--open\"}`}\r\n              startPhoneVerificationMu={startPhoneVerificationMu}\r\n              completePhoneVerificationMu={completePhoneVerificationMu}\r\n              muLoading={completePhoneVerificationLoding || startVerifiLoading}\r\n              phoneNumber={phoneNumber}\r\n              modalHook={modalHook}\r\n            />\r\n          )}\r\n        </CompletePhoneVerification>\r\n      );\r\n    }}\r\n  </StartPhoneVerificationMu>\r\n);\r\n\r\nexport default EerrorProtect(PhoneVerificationModalWrap);\r\n"]},"metadata":{},"sourceType":"module"}