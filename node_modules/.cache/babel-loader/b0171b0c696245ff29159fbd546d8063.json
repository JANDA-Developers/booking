{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\src\\\\pages\\\\middleServer\\\\signUp\\\\SignUp.tsx\";\n\n/* eslint-disable  */\nimport React, { useState } from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport { toast } from \"react-toastify\";\nimport InputText from \"../../../atoms/forms/inputText/InputText\";\nimport Radio from \"../../../atoms/forms/radio/Radio\";\nimport Button from \"../../../atoms/button/Button\";\nimport { LOG_USER_IN, IS_LOGGED_IN } from \"../../../clientQueries\";\nimport { EMAIL_SIGN_UP, GET_USER_INFO } from \"../../../queries\";\nimport \"./SignUp.scss\";\nimport utils from \"../../../utils/utils\";\nimport { useInput, useRadio, LANG } from \"../../../hooks/hook\";\nimport privacyPolicy from \"../../../docs/privacyPolicy\";\nimport { isHaveNumber, isLengthIn, isHaveScharacter } from \"../../../utils/inputValidations\";\n\nvar SignUp = function SignUp(_ref) {\n  var context = _ref.context;\n  var history = context.history;\n  var nameHook = useInput(\"\");\n  var emailHook = useInput(\"\");\n  var phoneNumberHook = useInput(\"\");\n  var passwordHook = useInput(\"\");\n  var checkPasswordHook = useInput(\"\");\n\n  var _useRadio = useRadio(\"N\"),\n      _useRadio2 = _slicedToArray(_useRadio, 2),\n      infoAgreement = _useRadio2[0],\n      setInfoAgreement = _useRadio2[1];\n\n  var _useState = useState({\n    special: false,\n    length: false,\n    enAndNumber: false\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      passwordCondition = _useState2[0],\n      setPasswordCondition = _useState2[1];\n\n  return React.createElement(\"div\", {\n    id: \"signUpPage\",\n    className: \"signUp container container--sm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"docs-section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(Mutation, {\n    mutation: LOG_USER_IN,\n    refetchQueries: [{\n      query: IS_LOGGED_IN\n    }, {\n      query: GET_USER_INFO\n    }],\n    onCompleted: function onCompleted() {\n      history.replace(\"/dashboard\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, function (logUserIn) {\n    return React.createElement(Mutation, {\n      mutation: EMAIL_SIGN_UP,\n      variables: {\n        name: nameHook.value,\n        email: emailHook.value,\n        phoneNumber: phoneNumberHook.value,\n        password: passwordHook.value\n      },\n      onCompleted: function onCompleted(_ref2) {\n        var _ref2$EmailSignUp = _ref2.EmailSignUp,\n            ok = _ref2$EmailSignUp.ok,\n            error = _ref2$EmailSignUp.error,\n            token = _ref2$EmailSignUp.token;\n\n        // 자동로그인\n        if (ok) {\n          if (token) {\n            toast.success(LANG(\"signup_complted\"));\n            logUserIn({\n              variables: {\n                token: token\n              }\n            });\n          }\n        }\n\n        if (error) {\n          toast.warn(error);\n          console.error(error);\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, function (mutation, data) {\n      var signUpSubmit = function signUpSubmit(e) {\n        e.preventDefault();\n\n        if (!nameHook.isValid) {\n          toast.warn(LANG(\"name_is_not_valid\"));\n          return false;\n        }\n\n        if (!emailHook.isValid) {\n          toast.warn(LANG(\"not_a_valid_email\"));\n          return false;\n        }\n\n        if (!phoneNumberHook.isValid) {\n          toast.warn(LANG(\"not_a_valid_phoneNumber\"));\n          return false;\n        }\n\n        if (!passwordHook.isValid) {\n          toast.warn(LANG(\"not_a_valid_password\"));\n          return false;\n        }\n\n        if (passwordHook.value !== checkPasswordHook.value) {\n          toast.warn(LANG(\"not_a_valid_password\"));\n          return false;\n        }\n\n        if (passwordHook.value !== checkPasswordHook.value) {\n          toast.warn(LANG(\"password_is_not_matched\"));\n          return false;\n        }\n\n        if (infoAgreement === \"N\") {\n          toast.warn(LANG(\"please_aree_to_info_offer\"));\n          return false;\n        }\n\n        mutation();\n      };\n\n      return React.createElement(\"form\", {\n        onSubmit: signUpSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, LANG(\"signUp\")), React.createElement(\"div\", {\n        className: \"flex-grid docs-section__box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex-grid__col col--full-12 col--md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(InputText, Object.assign({}, nameHook, {\n        validation: utils.isName,\n        label: LANG(\"name\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"flex-grid__col col--full-12 col--md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(InputText, Object.assign({}, passwordHook, {\n        onChange: function onChange(v) {\n          setPasswordCondition({\n            enAndNumber: isHaveNumber(v),\n            length: isLengthIn(v, 15, 7),\n            special: isHaveScharacter(v)\n          });\n          passwordHook.onChange(v);\n        },\n        validation: utils.isPassword,\n        type: \"password\",\n        label: LANG(\"password\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }))), React.createElement(\"p\", {\n        className: \"JDsmall-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, LANG(\"password_condition\")(passwordCondition.special, passwordCondition.length, passwordCondition.enAndNumber)), React.createElement(\"div\", {\n        className: \"flex-grid__col col--full-12 col--md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(InputText, Object.assign({}, checkPasswordHook, {\n        type: \"password\",\n        label: LANG(\"check_password\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"flex-grid__col col--full-12 col--md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(InputText, Object.assign({}, phoneNumberHook, {\n        hyphen: true,\n        validation: utils.isPhone,\n        label: LANG(\"phoneNumber\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"flex-grid__col col--full-12 col--md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(InputText, Object.assign({}, emailHook, {\n        validation: utils.isEmail,\n        label: LANG(\"eamil\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"flex-grid__col col--full-12 col--md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(InputText, {\n        className: \"signUp__privacyPolicy\",\n        value: privacyPolicy,\n        label: LANG(\"agree_to_privacy_policy\"),\n        readOnly: true,\n        scroll: true,\n        textarea: true,\n        doubleHeight: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"flex-grid__col col--full-12 col--md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(Radio, {\n        value: \"Y\",\n        selectedValue: infoAgreement,\n        onChange: setInfoAgreement,\n        label: LANG(\"agree\"),\n        checked: true,\n        id: \"RD1--1\",\n        groupName: \"Agree\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }), React.createElement(Radio, {\n        value: \"N\",\n        selectedValue: infoAgreement,\n        onChange: setInfoAgreement,\n        label: LANG(\"not_agree\"),\n        id: \"RD1--2\",\n        groupName: \"Agree\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(Button, {\n        thema: \"primary\",\n        type: \"submit\",\n        label: LANG(\"singUp_submit\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      })));\n    });\n  })));\n};\n\nexport default SignUp;","map":{"version":3,"sources":["C:/Users/김민재/Desktop/projects/jd-api-server-client/src/pages/middleServer/signUp/SignUp.tsx"],"names":["React","useState","Mutation","toast","InputText","Radio","Button","LOG_USER_IN","IS_LOGGED_IN","EMAIL_SIGN_UP","GET_USER_INFO","utils","useInput","useRadio","LANG","privacyPolicy","isHaveNumber","isLengthIn","isHaveScharacter","SignUp","context","history","nameHook","emailHook","phoneNumberHook","passwordHook","checkPasswordHook","infoAgreement","setInfoAgreement","special","length","enAndNumber","passwordCondition","setPasswordCondition","query","replace","logUserIn","name","value","email","phoneNumber","password","EmailSignUp","ok","error","token","success","variables","warn","console","mutation","data","signUpSubmit","e","preventDefault","isValid","isName","v","onChange","isPassword","isPhone","isEmail"],"mappings":"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","sourcesContent":["/* eslint-disable  */\r\nimport React, {useState} from \"react\";\r\nimport {Mutation} from \"react-apollo\";\r\nimport {toast} from \"react-toastify\";\r\nimport InputText from \"../../../atoms/forms/inputText/InputText\";\r\nimport Radio from \"../../../atoms/forms/radio/Radio\";\r\nimport Button from \"../../../atoms/button/Button\";\r\nimport {LOG_USER_IN, IS_LOGGED_IN} from \"../../../clientQueries\";\r\nimport {EMAIL_SIGN_UP, GET_USER_INFO} from \"../../../queries\";\r\nimport \"./SignUp.scss\";\r\nimport utils from \"../../../utils/utils\";\r\nimport {useInput, useRadio, LANG} from \"../../../hooks/hook\";\r\nimport privacyPolicy from \"../../../docs/privacyPolicy\";\r\nimport {IContext} from \"../../MiddleServerRouter\";\r\nimport uri from \"../../../uri\";\r\nimport {\r\n  isHaveNumber,\r\n  isLengthIn,\r\n  isHaveScharacter\r\n} from \"../../../utils/inputValidations\";\r\n\r\ninterface Iprops {\r\n  context: IContext;\r\n}\r\n\r\nconst SignUp: React.FC<Iprops> = ({context}) => {\r\n  const {history} = context;\r\n  const nameHook = useInput(\"\");\r\n  const emailHook = useInput(\"\");\r\n  const phoneNumberHook = useInput(\"\");\r\n  const passwordHook = useInput(\"\");\r\n  const checkPasswordHook = useInput(\"\");\r\n  const [infoAgreement, setInfoAgreement] = useRadio(\"N\");\r\n  const [passwordCondition, setPasswordCondition] = useState({\r\n    special: false,\r\n    length: false,\r\n    enAndNumber: false\r\n  });\r\n\r\n  return (\r\n    <div id=\"signUpPage\" className=\"signUp container container--sm\">\r\n      <div className=\"docs-section\">\r\n        {/* 인증모달 */}\r\n        <Mutation\r\n          mutation={LOG_USER_IN}\r\n          refetchQueries={[{query: IS_LOGGED_IN}, {query: GET_USER_INFO}]}\r\n          onCompleted={() => {\r\n            history.replace(`/dashboard`);\r\n          }}\r\n        >\r\n          {(logUserIn: any) => (\r\n            <Mutation\r\n              mutation={EMAIL_SIGN_UP}\r\n              variables={{\r\n                name: nameHook.value,\r\n                email: emailHook.value,\r\n                phoneNumber: phoneNumberHook.value,\r\n                password: passwordHook.value\r\n              }}\r\n              onCompleted={({EmailSignUp: {ok, error, token}}: any) => {\r\n                // 자동로그인\r\n                if (ok) {\r\n                  if (token) {\r\n                    toast.success(LANG(\"signup_complted\"));\r\n                    logUserIn({\r\n                      variables: {\r\n                        token: token\r\n                      }\r\n                    });\r\n                  }\r\n                }\r\n                if (error) {\r\n                  toast.warn(error);\r\n                  console.error(error);\r\n                }\r\n              }}\r\n            >\r\n              {(mutation: any, data: any) => {\r\n                const signUpSubmit = (e: any) => {\r\n                  e.preventDefault();\r\n                  if (!nameHook.isValid) {\r\n                    toast.warn(LANG(\"name_is_not_valid\"));\r\n                    return false;\r\n                  }\r\n                  if (!emailHook.isValid) {\r\n                    toast.warn(LANG(\"not_a_valid_email\"));\r\n                    return false;\r\n                  }\r\n                  if (!phoneNumberHook.isValid) {\r\n                    toast.warn(LANG(\"not_a_valid_phoneNumber\"));\r\n                    return false;\r\n                  }\r\n                  if (!passwordHook.isValid) {\r\n                    toast.warn(LANG(\"not_a_valid_password\"));\r\n                    return false;\r\n                  }\r\n                  if (passwordHook.value !== checkPasswordHook.value) {\r\n                    toast.warn(LANG(\"not_a_valid_password\"));\r\n                    return false;\r\n                  }\r\n                  if (passwordHook.value !== checkPasswordHook.value) {\r\n                    toast.warn(LANG(\"password_is_not_matched\"));\r\n                    return false;\r\n                  }\r\n                  if (infoAgreement === \"N\") {\r\n                    toast.warn(LANG(\"please_aree_to_info_offer\"));\r\n                    return false;\r\n                  }\r\n                  mutation();\r\n                };\r\n                return (\r\n                  <form onSubmit={signUpSubmit}>\r\n                    <h3>{LANG(\"signUp\")}</h3>\r\n                    <div className=\"flex-grid docs-section__box\">\r\n                      <div className=\"flex-grid__col col--full-12 col--md-12\">\r\n                        <InputText\r\n                          {...nameHook}\r\n                          validation={utils.isName}\r\n                          label={LANG(\"name\")}\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex-grid__col col--full-12 col--md-12\">\r\n                        <InputText\r\n                          {...passwordHook}\r\n                          onChange={v => {\r\n                            setPasswordCondition({\r\n                              enAndNumber: isHaveNumber(v),\r\n                              length: isLengthIn(v, 15, 7),\r\n                              special: isHaveScharacter(v)\r\n                            });\r\n                            passwordHook.onChange(v);\r\n                          }}\r\n                          validation={utils.isPassword}\r\n                          type=\"password\"\r\n                          label={LANG(\"password\")}\r\n                        />\r\n                      </div>\r\n                      <p className=\"JDsmall-text\">\r\n                        {LANG(\"password_condition\")(\r\n                          passwordCondition.special,\r\n                          passwordCondition.length,\r\n                          passwordCondition.enAndNumber\r\n                        )}\r\n                      </p>\r\n                      <div className=\"flex-grid__col col--full-12 col--md-12\">\r\n                        <InputText\r\n                          {...checkPasswordHook}\r\n                          type=\"password\"\r\n                          label={LANG(\"check_password\")}\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex-grid__col col--full-12 col--md-12\">\r\n                        <InputText\r\n                          {...phoneNumberHook}\r\n                          hyphen\r\n                          validation={utils.isPhone}\r\n                          label={LANG(\"phoneNumber\")}\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex-grid__col col--full-12 col--md-12\">\r\n                        <InputText\r\n                          {...emailHook}\r\n                          validation={utils.isEmail}\r\n                          label={LANG(\"eamil\")}\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex-grid__col col--full-12 col--md-12\">\r\n                        <InputText\r\n                          className=\"signUp__privacyPolicy\"\r\n                          value={privacyPolicy}\r\n                          label={LANG(\"agree_to_privacy_policy\")}\r\n                          readOnly\r\n                          scroll\r\n                          textarea\r\n                          doubleHeight\r\n                        />\r\n                      </div>\r\n                      <div className=\"flex-grid__col col--full-12 col--md-12\">\r\n                        <Radio\r\n                          value=\"Y\"\r\n                          selectedValue={infoAgreement}\r\n                          onChange={setInfoAgreement}\r\n                          label={LANG(\"agree\")}\r\n                          checked\r\n                          id=\"RD1--1\"\r\n                          groupName=\"Agree\"\r\n                        />\r\n                        <Radio\r\n                          value=\"N\"\r\n                          selectedValue={infoAgreement}\r\n                          onChange={setInfoAgreement}\r\n                          label={LANG(\"not_agree\")}\r\n                          id=\"RD1--2\"\r\n                          groupName=\"Agree\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div>\r\n                      <Button\r\n                        thema=\"primary\"\r\n                        type=\"submit\"\r\n                        label={LANG(\"singUp_submit\")}\r\n                      />\r\n                    </div>\r\n                  </form>\r\n                );\r\n              }}\r\n            </Mutation>\r\n          )}\r\n        </Mutation>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n"]},"metadata":{},"sourceType":"module"}