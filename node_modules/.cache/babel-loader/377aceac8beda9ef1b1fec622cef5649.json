{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\uAE40\\uBBFC\\uC7AC\\\\Desktop\\\\projects\\\\jd-api-server-client\\\\src\\\\atoms\\\\timeline\\\\Timeline.tsx\";\nimport $ from \"jquery\";\n/* tslint:disable */\n\nimport Timeline, { // @ts-ignore\nSidebarHeader // @ts-ignore\n, DateHeader // @ts-ignore\n, TimelineHeaders // @ts-ignore\n, CustomHeader, defaultSubHeaderLabelFormats, defaultHeaderLabelFormats } from \"react-calendar-timeline\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./Timeline.scss\";\nimport moment from \"moment\"; // import 'react-calendar-timeline/lib/Timeline.css';\n\nimport ErrProtecter from \"../../utils/errProtect\";\nimport { TimePerMs } from \"../../types/enum\";\nimport JDIcon, { IconSize } from \"../icons/Icons\";\nimport { LANG } from \"../../hooks/hook\";\nimport { isEmpty } from \"../../utils/utils\";\n// 변수설정\nvar ASSIG_IMELINE_HEIGHT = 40;\nexport { ASSIG_IMELINE_HEIGHT };\n\n// 🍰 메인리턴\nvar JDtimeline = function JDtimeline(_ref) {\n  var onMouseDown = _ref.onMouseDown,\n      onMouseMove = _ref.onMouseMove,\n      handleDraggingEnd = _ref.handleDraggingEnd,\n      handleMouseDownCanvas = _ref.handleMouseDownCanvas,\n      handleDraggingCell = _ref.handleDraggingCell,\n      hanldeOnKeyDown = _ref.hanldeOnKeyDown,\n      props = _objectWithoutProperties(_ref, [\"onMouseDown\", \"onMouseMove\", \"handleDraggingEnd\", \"handleMouseDownCanvas\", \"handleDraggingCell\", \"hanldeOnKeyDown\"]);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isActive = _useState2[0],\n      setIsActive = _useState2[1];\n\n  var defaultDotPoint = {\n    offsetX: 0,\n    clientY: 0,\n    offsetY: 0,\n    clientX: 0,\n    placeIndex: 0,\n    timeStart: 0\n  };\n\n  var _useState3 = useState(defaultDotPoint),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dotPoint = _useState4[0],\n      setDotPoint = _useState4[1];\n\n  var oneDayWith = $(\".timelineHeaderCell\").width();\n  var firstCell = $(\".timelineHeaderCell\")[0];\n  var targetGroup = $(\".timelineHeaderCell div:first-child\");\n  var cellHeight = $(\".rct-hl-even.group\").height() || 0;\n  var firstCellLeft = 0;\n\n  if (firstCell) {\n    // @ts-ignore\n    firstCellLeft = $(firstCell).position().left;\n  }\n\n  var toggleDraggingMode = function toggleDraggingMode(flag) {\n    $(\".react-calendar-timeline .rct-outer .rct-scroll .rct-horizontal-lines .group\").css(\"cursor\", flag ? \"crosshair\" : \"\");\n    setIsActive(flag);\n  };\n\n  useEffect(function () {\n    // 타임라인 밖까지 드래그했을경우 이벤트가 발생 하지않아서 여기배치\n    // 마우스를 올리면\n    var handleMouseUpCanvas = function handleMouseUpCanvas(e) {\n      if (isActive) {\n        handleDraggingEnd(e);\n      }\n\n      toggleDraggingMode(false);\n      setDotPoint(defaultDotPoint);\n    };\n\n    window.addEventListener(\"mouseup\", handleMouseUpCanvas);\n    return function () {\n      window.removeEventListener(\"mouseup\", handleMouseUpCanvas);\n    };\n  });\n  return React.createElement(\"div\", {\n    onMouseMove: function onMouseMove(e) {\n      e.persist();\n      if (!oneDayWith || !handleDraggingCell || !isActive || !dotPoint.clientX || !dotPoint.clientY) return;\n      var _e$nativeEvent = e.nativeEvent,\n          clientX = _e$nativeEvent.clientX,\n          clientY = _e$nativeEvent.clientY;\n      var moveDiffX = clientX - dotPoint.clientX;\n      var moveDiffY = clientY - dotPoint.clientY;\n      var diffMovePoint = (dotPoint.offsetX + Math.abs(firstCellLeft)) % oneDayWith;\n      var opositDiffMovePoint = oneDayWith - diffMovePoint;\n      var moveCountX = 0;\n      var moveCountY = 0;\n\n      if (moveDiffX > 0 && moveDiffX > opositDiffMovePoint) {\n        moveCountX = Math.floor((moveDiffX - opositDiffMovePoint) / oneDayWith) + 1;\n      } else if (moveDiffX < 0 && Math.abs(moveDiffX) > diffMovePoint) {\n        moveCountX = Math.ceil((moveDiffX + diffMovePoint) / oneDayWith) - 1;\n      }\n\n      var diffMovePointY = dotPoint.offsetY;\n      var opositDiffMovePointY = cellHeight - diffMovePointY;\n\n      if (moveDiffY > 0 && moveDiffY > opositDiffMovePointY) {\n        moveCountY = Math.floor((moveDiffY - opositDiffMovePointY - 2) / cellHeight) + 1;\n      } else if (moveDiffY < 0 && Math.abs(moveDiffY) > diffMovePointY) {\n        moveCountY = Math.ceil((moveDiffY + diffMovePointY) / cellHeight) - 1;\n      }\n\n      handleDraggingCell(e, {\n        x: moveCountX,\n        y: moveCountY\n      }, dotPoint); // 마우스가 움직인 양을 토대로 위아래 좌우 그룹을 선택상태로 만듬\n    },\n    onMouseDown: function onMouseDown(e) {\n      e.persist();\n      var group = e.target;\n      handleMouseDownCanvas && handleMouseDownCanvas(e);\n      if ( // 마우스 오른쪽버튼이 아니거나\n      e.button !== 2 || // 그룹이 올바르지 않거나\n      !$(group).hasClass(\"group\") || // 원데이 위드가 없거나\n      !oneDayWith || isEmpty(targetGroup)) return;\n      toggleDraggingMode(true); // scrollTarget.css(\"pointer-events\", \"none\");\n\n      var _e$nativeEvent2 = e.nativeEvent,\n          offsetX = _e$nativeEvent2.offsetX,\n          offsetY = _e$nativeEvent2.offsetY,\n          clientY = _e$nativeEvent2.clientY,\n          clientX = _e$nativeEvent2.clientX;\n      var cellIndex = Math.floor((offsetX + Math.abs(firstCellLeft)) / oneDayWith) + 1;\n      var theCell = targetGroup[cellIndex]; // 해당 인덱스 또는 인덱스-1 \"Tooltip\"떄문\n\n      var startTime = $(theCell).data(\"start\");\n      if (!startTime) startTime = $(targetGroup[cellIndex - 1]).data(\"start\");\n      if (!startTime) return;\n      setDotPoint({\n        offsetX: offsetX,\n        offsetY: offsetY,\n        clientY: clientY,\n        clientX: clientX,\n        placeIndex: $(group).index(),\n        timeStart: startTime\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(Timeline, Object.assign({\n    id: \"react-calendar-timeline\"\n  }, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  })));\n}; // 또는 HeaderCellRedner 파일 참조\n\n\nvar krSubHeaderLabelFormats = Object.assign({}, defaultSubHeaderLabelFormats, {\n  monthLong: \"AMM \".concat(LANG(\"month\")),\n  // 년 LANG(\"month\") 필요\n  hourLong: \"M\".concat(LANG(\"month\"), \" D\").concat(LANG(\"date\"), \" ddd\") // LANG(\"month\") 일\n\n});\nvar krHeaderLabelFormats = Object.assign({}, defaultHeaderLabelFormats, {\n  day: {\n    Long: \"A YYYY\".concat(LANG(\"year\"), \" MM\").concat(LANG(\"month\"), \" DD\").concat(LANG(\"date\"))\n  }\n});\nvar defaultTimeStart = moment().startOf(\"day\").toDate(); // 시작시 끝까지 보일범위\n\nvar defaultTimeEnd = moment().startOf(\"day\").add(7, \"day\").toDate();\nvar keys = {\n  groupIdKey: \"id\",\n  groupTitleKey: \"title\",\n  groupRightTitleKey: \"rightTitle\",\n  itemIdKey: \"id\",\n  itemTitleKey: \"bookingId\",\n  itemDivTitleKey: \"id\",\n  itemGroupKey: \"group\",\n  itemTimeStartKey: \"start\",\n  itemTimeEndKey: \"end\",\n  groupLabelKey: \"title\"\n};\nvar sharedProps = {\n  keys: keys,\n  minZoom: 14 * TimePerMs.DAY,\n  maxZoom: 7 * TimePerMs.DAY,\n  dragSnap: TimePerMs.DAY,\n  subHeaderLabelFormats: krSubHeaderLabelFormats,\n  headerLabelFormats: krHeaderLabelFormats,\n  timeSteps: {\n    hour: 24,\n    day: 1,\n    month: 1,\n    year: 1\n  },\n  fixedHeader: \"fixed\",\n  verticalLineClassNamesForTime: function verticalLineClassNamesForTime(timeStart, timeEnd) {\n    if (timeEnd < new Date().getTime()) return [\"verticalLine\", \"verticalLine--past\"];\n    return [\"verticalLine\"];\n  },\n  horizontalLineClassNamesForGroup: function horizontalLineClassNamesForGroup(group) {\n    return [\"group\"];\n  },\n  defaultTimeStart: defaultTimeStart,\n  defaultTimeEnd: defaultTimeEnd\n};\nexport { defaultHeaderLabelFormats, defaultSubHeaderLabelFormats, DateHeader, SidebarHeader, TimelineHeaders, CustomHeader, sharedProps };\nexport var SharedSideBarHeader = function SharedSideBarHeader(_ref2) {\n  var dayPickerModalHook = _ref2.dayPickerModalHook,\n      getRootProps = _ref2.getRootProps;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283\n    },\n    __self: this\n  }, React.createElement(\"div\", Object.assign({\n    className: \"rct-header-root__topLeft\"\n  }, getRootProps(), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    onMouseDown: function onMouseDown(e) {\n      e.preventDefault();\n      e.stopPropagation(); // dayPickerModalHook.openModal();\n    },\n    onClick: function onClick(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      dayPickerModalHook.openModal();\n    },\n    style: {\n      width: \"100%\",\n      height: \"100%\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285\n    },\n    __self: this\n  }, React.createElement(JDIcon, {\n    className: \"dailyPrice__topLeftIcon\",\n    size: IconSize.MEDEIUM_SMALL,\n    icon: \"calendar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304\n    },\n    __self: this\n  }))));\n};\nexport default ErrProtecter(JDtimeline);","map":{"version":3,"sources":["C:/Users/김민재/Desktop/projects/jd-api-server-client/src/atoms/timeline/Timeline.tsx"],"names":["$","Timeline","SidebarHeader","DateHeader","TimelineHeaders","CustomHeader","defaultSubHeaderLabelFormats","defaultHeaderLabelFormats","React","useState","useEffect","moment","ErrProtecter","TimePerMs","JDIcon","IconSize","LANG","isEmpty","ASSIG_IMELINE_HEIGHT","JDtimeline","onMouseDown","onMouseMove","handleDraggingEnd","handleMouseDownCanvas","handleDraggingCell","hanldeOnKeyDown","props","isActive","setIsActive","defaultDotPoint","offsetX","clientY","offsetY","clientX","placeIndex","timeStart","dotPoint","setDotPoint","oneDayWith","width","firstCell","targetGroup","cellHeight","height","firstCellLeft","position","left","toggleDraggingMode","flag","css","handleMouseUpCanvas","e","window","addEventListener","removeEventListener","persist","nativeEvent","moveDiffX","moveDiffY","diffMovePoint","Math","abs","opositDiffMovePoint","moveCountX","moveCountY","floor","ceil","diffMovePointY","opositDiffMovePointY","x","y","group","target","button","hasClass","cellIndex","theCell","startTime","data","index","krSubHeaderLabelFormats","Object","assign","monthLong","hourLong","krHeaderLabelFormats","day","Long","defaultTimeStart","startOf","toDate","defaultTimeEnd","add","keys","groupIdKey","groupTitleKey","groupRightTitleKey","itemIdKey","itemTitleKey","itemDivTitleKey","itemGroupKey","itemTimeStartKey","itemTimeEndKey","groupLabelKey","sharedProps","minZoom","DAY","maxZoom","dragSnap","subHeaderLabelFormats","headerLabelFormats","timeSteps","hour","month","year","fixedHeader","verticalLineClassNamesForTime","timeEnd","Date","getTime","horizontalLineClassNamesForGroup","SharedSideBarHeader","dayPickerModalHook","getRootProps","preventDefault","stopPropagation","openModal","display","alignItems","justifyContent","MEDEIUM_SMALL"],"mappings":"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","sourcesContent":["import $ from \"jquery\";\r\n/* tslint:disable */\r\nimport Timeline, {\r\n  // @ts-ignore\r\n  SidebarHeader,\r\n  // @ts-ignore\r\n  DateHeader,\r\n  // @ts-ignore\r\n  TimelineHeaders,\r\n  // @ts-ignore\r\n  CustomHeader,\r\n  defaultSubHeaderLabelFormats,\r\n  defaultHeaderLabelFormats\r\n} from \"react-calendar-timeline\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport \"./Timeline.scss\";\r\nimport moment from \"moment\";\r\n\r\n// import 'react-calendar-timeline/lib/Timeline.css';\r\nimport ErrProtecter from \"../../utils/errProtect\";\r\nimport { TimePerMs } from \"../../types/enum\";\r\nimport JDIcon, { IconSize } from \"../icons/Icons\";\r\nimport { LANG, IUseModal } from \"../../hooks/hook\";\r\nimport { isEmpty } from \"../../utils/utils\";\r\nimport { THandleMouseDown } from \"../../pages/bookingHost/assig/helpers/assigIntrerface\";\r\n\r\nexport interface IDotPoint {\r\n  offsetX: number;\r\n  offsetY: number;\r\n  clientY: number;\r\n  clientX: number;\r\n  placeIndex: number;\r\n  timeStart: number;\r\n}\r\n\r\nexport interface IMoveCount {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\n// 변수설정\r\nconst ASSIG_IMELINE_HEIGHT = 40;\r\nexport { ASSIG_IMELINE_HEIGHT };\r\n\r\ninterface Iprops {\r\n  handleMouseDownCanvas?: THandleMouseDown;\r\n  hanldeOnKeyDown?: (event: React.KeyboardEvent<HTMLDivElement>) => void;\r\n  handleDraggingEnd?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\r\n  handleDraggingCell?: (\r\n    e: React.MouseEvent<HTMLDivElement, MouseEvent>,\r\n    moveCounts: IMoveCount,\r\n    dotPoint: IDotPoint\r\n  ) => void;\r\n}\r\n\r\n// 🍰 메인리턴\r\nconst JDtimeline: React.FC<Iprops> = ({\r\n  onMouseDown,\r\n  onMouseMove,\r\n  handleDraggingEnd,\r\n  handleMouseDownCanvas,\r\n  handleDraggingCell,\r\n  hanldeOnKeyDown,\r\n  ...props\r\n}: any) => {\r\n  const [isActive, setIsActive] = useState(false);\r\n  const defaultDotPoint = {\r\n    offsetX: 0,\r\n    clientY: 0,\r\n    offsetY: 0,\r\n    clientX: 0,\r\n    placeIndex: 0,\r\n    timeStart: 0\r\n  };\r\n  const [dotPoint, setDotPoint] = useState<IDotPoint>(defaultDotPoint);\r\n\r\n  const oneDayWith = $(\".timelineHeaderCell\").width();\r\n  const firstCell = $(`.timelineHeaderCell`)[0];\r\n  const targetGroup = $(`.timelineHeaderCell div:first-child`);\r\n  const cellHeight = $(\".rct-hl-even.group\").height() || 0;\r\n\r\n  let firstCellLeft = 0;\r\n  if (firstCell) {\r\n    // @ts-ignore\r\n    firstCellLeft = $(firstCell).position().left;\r\n  }\r\n\r\n  const toggleDraggingMode = (flag: boolean) => {\r\n    $(\r\n      \".react-calendar-timeline .rct-outer .rct-scroll .rct-horizontal-lines .group\"\r\n    ).css(\"cursor\", flag ? \"crosshair\" : \"\");\r\n    setIsActive(flag);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // 타임라인 밖까지 드래그했을경우 이벤트가 발생 하지않아서 여기배치\r\n    // 마우스를 올리면\r\n    const handleMouseUpCanvas = (e: any) => {\r\n      if (isActive) {\r\n        handleDraggingEnd(e);\r\n      }\r\n      toggleDraggingMode(false);\r\n      setDotPoint(defaultDotPoint);\r\n    };\r\n    window.addEventListener(\"mouseup\", handleMouseUpCanvas);\r\n    return () => {\r\n      window.removeEventListener(\"mouseup\", handleMouseUpCanvas);\r\n    };\r\n  });\r\n\r\n  return (\r\n    <div\r\n      onMouseMove={e => {\r\n        e.persist();\r\n        if (\r\n          !oneDayWith ||\r\n          !handleDraggingCell ||\r\n          !isActive ||\r\n          !dotPoint.clientX ||\r\n          !dotPoint.clientY\r\n        )\r\n          return;\r\n        const { clientX, clientY } = e.nativeEvent;\r\n        const moveDiffX = clientX - dotPoint.clientX;\r\n        const moveDiffY = clientY - dotPoint.clientY;\r\n\r\n        const diffMovePoint =\r\n          (dotPoint.offsetX + Math.abs(firstCellLeft)) % oneDayWith;\r\n        const opositDiffMovePoint = oneDayWith - diffMovePoint;\r\n\r\n        let moveCountX = 0;\r\n        let moveCountY = 0;\r\n\r\n        if (moveDiffX > 0 && moveDiffX > opositDiffMovePoint) {\r\n          moveCountX =\r\n            Math.floor((moveDiffX - opositDiffMovePoint) / oneDayWith) + 1;\r\n        } else if (moveDiffX < 0 && Math.abs(moveDiffX) > diffMovePoint) {\r\n          moveCountX = Math.ceil((moveDiffX + diffMovePoint) / oneDayWith) - 1;\r\n        }\r\n\r\n        const diffMovePointY = dotPoint.offsetY;\r\n        const opositDiffMovePointY = cellHeight - diffMovePointY;\r\n\r\n        if (moveDiffY > 0 && moveDiffY > opositDiffMovePointY) {\r\n          moveCountY =\r\n            Math.floor((moveDiffY - opositDiffMovePointY - 2) / cellHeight) + 1;\r\n        } else if (moveDiffY < 0 && Math.abs(moveDiffY) > diffMovePointY) {\r\n          moveCountY = Math.ceil((moveDiffY + diffMovePointY) / cellHeight) - 1;\r\n        }\r\n\r\n        handleDraggingCell(e, { x: moveCountX, y: moveCountY }, dotPoint);\r\n        // 마우스가 움직인 양을 토대로 위아래 좌우 그룹을 선택상태로 만듬\r\n      }}\r\n      onMouseDown={e => {\r\n        e.persist();\r\n        const group = e.target;\r\n        handleMouseDownCanvas && handleMouseDownCanvas(e);\r\n\r\n        if (\r\n          // 마우스 오른쪽버튼이 아니거나\r\n          e.button !== 2 ||\r\n          // 그룹이 올바르지 않거나\r\n          !$(group).hasClass(\"group\") ||\r\n          // 원데이 위드가 없거나\r\n          !oneDayWith ||\r\n          isEmpty(targetGroup)\r\n        )\r\n          return;\r\n\r\n        toggleDraggingMode(true);\r\n        // scrollTarget.css(\"pointer-events\", \"none\");\r\n\r\n        const { offsetX, offsetY, clientY, clientX } = e.nativeEvent;\r\n\r\n        const cellIndex =\r\n          Math.floor((offsetX + Math.abs(firstCellLeft)) / oneDayWith) + 1;\r\n\r\n        const theCell = targetGroup[cellIndex];\r\n\r\n        // 해당 인덱스 또는 인덱스-1 \"Tooltip\"떄문\r\n        let startTime = $(theCell).data(\"start\");\r\n        if (!startTime) startTime = $(targetGroup[cellIndex - 1]).data(\"start\");\r\n        if (!startTime) return;\r\n\r\n        setDotPoint({\r\n          offsetX,\r\n          offsetY,\r\n          clientY,\r\n          clientX,\r\n          placeIndex: $(group).index(),\r\n          timeStart: startTime\r\n        });\r\n      }}\r\n    >\r\n      <Timeline id=\"react-calendar-timeline\" {...props} />\r\n    </div>\r\n  );\r\n};\r\n\r\n// 또는 HeaderCellRedner 파일 참조\r\nconst krSubHeaderLabelFormats = Object.assign(\r\n  {},\r\n  defaultSubHeaderLabelFormats,\r\n  {\r\n    monthLong: `AMM ${LANG(\"month\")}`, // 년 LANG(\"month\") 필요\r\n    hourLong: `M${LANG(\"month\")} D${LANG(\"date\")} ddd` // LANG(\"month\") 일\r\n  }\r\n);\r\n\r\nconst krHeaderLabelFormats = Object.assign({}, defaultHeaderLabelFormats, {\r\n  day: {\r\n    Long: `A YYYY${LANG(\"year\")} MM${LANG(\"month\")} DD${LANG(\"date\")}`\r\n  }\r\n});\r\n\r\nconst defaultTimeStart = moment()\r\n  .startOf(\"day\")\r\n  .toDate();\r\n\r\n// 시작시 끝까지 보일범위\r\nconst defaultTimeEnd = moment()\r\n  .startOf(\"day\")\r\n  .add(7, \"day\")\r\n  .toDate();\r\n\r\nconst keys = {\r\n  groupIdKey: \"id\",\r\n  groupTitleKey: \"title\",\r\n  groupRightTitleKey: \"rightTitle\",\r\n  itemIdKey: \"id\",\r\n  itemTitleKey: \"bookingId\",\r\n  itemDivTitleKey: \"id\",\r\n  itemGroupKey: \"group\",\r\n  itemTimeStartKey: \"start\",\r\n  itemTimeEndKey: \"end\",\r\n  groupLabelKey: \"title\"\r\n};\r\n\r\nconst sharedProps = {\r\n  keys,\r\n  minZoom: 14 * TimePerMs.DAY,\r\n  maxZoom: 7 * TimePerMs.DAY,\r\n  dragSnap: TimePerMs.DAY,\r\n  subHeaderLabelFormats: krSubHeaderLabelFormats,\r\n  headerLabelFormats: krHeaderLabelFormats,\r\n  timeSteps: {\r\n    hour: 24,\r\n    day: 1,\r\n    month: 1,\r\n    year: 1\r\n  },\r\n  fixedHeader: \"fixed\",\r\n  verticalLineClassNamesForTime: (timeStart: any, timeEnd: any) => {\r\n    if (timeEnd < new Date().getTime())\r\n      return [\"verticalLine\", \"verticalLine--past\"];\r\n    return [\"verticalLine\"];\r\n  },\r\n  horizontalLineClassNamesForGroup: (group: any) => [\"group\"],\r\n  defaultTimeStart,\r\n  defaultTimeEnd\r\n};\r\n\r\nexport {\r\n  defaultHeaderLabelFormats,\r\n  defaultSubHeaderLabelFormats,\r\n  DateHeader,\r\n  SidebarHeader,\r\n  TimelineHeaders,\r\n  CustomHeader,\r\n  sharedProps\r\n};\r\n\r\ninterface IProps {\r\n  dayPickerModalHook: IUseModal;\r\n  getRootProps: any;\r\n}\r\n\r\nexport const SharedSideBarHeader: React.FC<IProps> = ({\r\n  dayPickerModalHook,\r\n  getRootProps\r\n}) => {\r\n  return (\r\n    <div>\r\n      <div className=\"rct-header-root__topLeft\" {...getRootProps()}>\r\n        <div\r\n          onMouseDown={e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            // dayPickerModalHook.openModal();\r\n          }}\r\n          onClick={e => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            dayPickerModalHook.openModal();\r\n          }}\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\"\r\n          }}\r\n        >\r\n          <JDIcon\r\n            className=\"dailyPrice__topLeftIcon\"\r\n            size={IconSize.MEDEIUM_SMALL}\r\n            icon=\"calendar\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrProtecter(JDtimeline);\r\n"]},"metadata":{},"sourceType":"module"}